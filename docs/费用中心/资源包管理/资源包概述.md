# 资源包概述

## 1. 资源类型

资源包根据类型，可分为递减型、周期型、混合型3种：

| 资源类型 | 说明 |
| --- | --- |
| 递减型 | 总量固定，余量随着抵扣不断减少，直至余量清零或者到期； |
| 周期型 | 每个重置周期内总量固定，余量随着抵扣不断减少，且不可转移到下个周期，下个重置周期初余量恢复，直至到期； |
| 混合型 | 每个重置周期内总量固定，余量随着抵扣不断减少，且可提前抵扣未来周期的余量，直至总余量清零或者资源包到期； |

## 2. 抵扣规则

### 2.1 抵扣逻辑

按量计费云产品实例产生用量后，优先用资源包抵扣，超额部分出具账单进行扣款；满足如下条件时，可以使用资源包抵扣：

- 资源包支持抵扣产生用量的按量计费项；
- 按量计费项对应的用量产生时间周期内，资源包为"生效中"状态；

除上述普适规则外，有如下特殊规则：

- 若资源包指定了可抵扣的实例，则该资源包仅可抵扣被指定实例的用量，不可抵扣其他实例的用量；
- 抢占式实例不支持使用预留实例券抵扣；
- 企业直播等非平台统一资源包的相关抵扣规则以云产品说明为准；
- **财务托管场景**：
  - 子账号的按量计费实例，可使用子账号的资源包抵扣，也可使用主账号的资源包进行抵扣，优先使用子账号自己的资源包进行抵扣；
  - 主账号的按量计费实例，只能用主账号的资源包抵扣，不能使用子账号的资源包抵扣；
- **代销&代售业务场景**：
  - 终端客户的按量计费实例，可使用名下的资源包抵扣；
  - 代销&代售伙伴继承终端客户的资源包抵扣用量，无法使用自己的资源包进行抵扣终端客户的用量；
  - 直销场景下，代销&代售伙伴仍可使用自己的资源包抵扣自己的按量计费实例用量；

### 2.2 抵扣顺序优先级

如果用户名下同时存在多个可抵扣的资源包，则系统会按照如下优先级进行抵扣：**失效时间 > 资源类型 > 生效时间**；

- 优先使用失效时间早的资源包；针对周期型资源包，失效时间指的是当前重置周期结束时间；
- 若失效时间相同，则优先抵扣周期型资源包，再抵扣递减型资源包；
- 若资源包类型和失效时间都相同，则优先使用生效时间早的资源包进行抵扣；针对周期型资源包，生效时间指的是当前重置周期开始时间；
