# 导入文档
本节将说明如何向已创建的知识库中导入文档。
# 操作步骤

1. 在知识库列表，点击知识库卡片中的【导入文档】，或进入知识库详情页面后点击【导入文档】

![Image](https://p9-arcosite.byteimg.com/tos-cn-i-goo7wpa0wc/fb97426d110a4a11ba393a408a46ea10~tplv-goo7wpa0wc-image.image =426x)
![Image](https://p9-arcosite.byteimg.com/tos-cn-i-goo7wpa0wc/28b4190f71b74d21bf12bd029f6eaf08~tplv-goo7wpa0wc-image.image =431x)

2. 在【导入文档】页面中填写相关参数，具体参数如下。

![Image](https://p9-arcosite.byteimg.com/tos-cn-i-goo7wpa0wc/0a2809ae1b234f04994c2e51abbec61c~tplv-goo7wpa0wc-image.image =1520x)
# 导入方式

| | | \
|**导入方式** |**说明** |
|---|---|
| | | \
|**本地上传** |直接上传本地文件到知识库，**系统会默认生成 doc_id**，因此分多次导入重名文档时都会保留，如需更新文档，请删除该旧文档后重新导入，或参照下文通过 url 方式导入，指定要更新文档的 doc_id，新文档会覆盖旧文档 |
| | | \
|**从 TOS 中导入** |* 需要先进行跨服务授权， 否则无法获取到当前账号下 TOS 中的文档信息 |\
| |* 直接选择 TOS 路径（**注：当前仅支持华北区域**）。 |\
| | |\
| |:::warning |\
| |1. 该目录下的文件可以在 [TOS](https://console.volcengine.com/tos) 上完成 doc_id 的定义，**没有 doc_id 的文档将会由系统自动生成 doc_id**。注意 doc_id 只能使用英文字母、数字、下划线_，并以英文字母开头，长度要求：[1, 128]。在 TOS 上有两种定义doc_id 的方式：1）通过文档的【修改元数据信息操作】，添加字段选择 x-tos-meta，配置 doc_id 的值，如下图。2）使用接口批量定义，见[SetObjectMeta](https://www.volcengine.com/docs/6349/74865) |\
| |2. 导入 TOS 目录下的文档是一次性的，后续目录下的文档变更不会被自动同步到知识库 |\
| |3. 目录下文档的 doc_id 不能重复，如果有重复，仅会覆盖并保留最后上传的文档 |\
| |4. 如果想对目录下文件内容进行变更，有以下两种方式： |\
| |   1. 通过 url 方式导入，并指定为要替换文档的 doc_id（相对比较快） |\
| |   2. 通过 TOS 方式导入，这种方式会对目录下所有的文档做变更检查，并将新文档替换旧文档。由于需要做文件校验，这种方式耗时较长 |\
| |5. 不符合格式要求的文档将会被忽略不会被导入知识库 |\
| |6. 导入目录时只会扫描目录下的文件，而不会递归查看子目录 |\
| |::: |\
| |![Image](https://p9-arcosite.byteimg.com/tos-cn-i-goo7wpa0wc/e1c5c5bf82fe40bfa9a008b33ff80506~tplv-goo7wpa0wc-image.image =759x) |\
| |![Image](https://p9-arcosite.byteimg.com/tos-cn-i-goo7wpa0wc/c6f3eb7d361d43218699a795c693ebbd~tplv-goo7wpa0wc-image.image =1466x) |\
| | |
| | | \
|**公开下载链接** |* 下载链接：本次导入文档的链接地址 |\
| |* 文档 ID：即 文档的 doc_id |\
| |* 文档名称：以格式结尾，如“文档名称.pdf” |\
| | |\
| |![Image](https://p9-arcosite.byteimg.com/tos-cn-i-goo7wpa0wc/61cae8aed0b24288b6fd6ba58a41db89~tplv-goo7wpa0wc-image.image =759x) |
| | | \
|**从飞书文档导入** |* 通过飞书文档导入 |\
| |   * 第一次使用需要按照引导先安装【火山方舟知识库】应用，否则无法获取飞书下的文档信息，安装应用有两种方式， |\
| |      * 一种是飞书企业管理员进行授权安装，搜索【火山方舟知识库】应用然后授权安装 |\
| | |\
| |![Image](https://p9-arcosite.byteimg.com/tos-cn-i-goo7wpa0wc/6e6cacf0946e4de59bf01480bc8d6fde~tplv-goo7wpa0wc-image.image =1388x) |\
| | |\
| |* 另一种是普通飞书用户安装，搜索【火山方舟知识库】应用申请安装，有飞书企业管理员进行审批 |\
| | |\
| |![Image](https://p9-arcosite.byteimg.com/tos-cn-i-goo7wpa0wc/8da231ca60c74c068a77ee8f62e2e83f~tplv-goo7wpa0wc-image.image =1335x) |\
| | |\
| |* 应用安装完成后，在知识库绑定飞书账号开始上传文档 |\
| | |\
| |![Image](https://p9-arcosite.byteimg.com/tos-cn-i-goo7wpa0wc/d5b310ca2f564c0f898f1168208c1367~tplv-goo7wpa0wc-image.image =2559x) |\
| | |\
| |* 支持选择飞书文档/文件夹/知识库，或者通过URL添加 |\
| | |\
| |![Image](https://p9-arcosite.byteimg.com/tos-cn-i-goo7wpa0wc/a1f60985f35b4175a8a6c873ff06286b~tplv-goo7wpa0wc-image.image =2556x) |\
| |:::warning |\
| |飞书企业管理员在飞书管理后台工作台的应用管理模块下选择【火山方舟知识库】可配置应用的可用范围及禁止哪些成员使用等。 |\
| |::: |\
| |![Image](https://p9-arcosite.byteimg.com/tos-cn-i-goo7wpa0wc/31d6ba3b427d4e69a010b662c44d0280~tplv-goo7wpa0wc-image.image =3212x) |\
| | |\
| |* 若要解除绑定知识库，点击按钮，退出账号即可 |\
| | |\
| |![Image](https://p9-arcosite.byteimg.com/tos-cn-i-goo7wpa0wc/1da85feeabfe4fcba6b20e1691905cad~tplv-goo7wpa0wc-image.image =2556x) |\
| | |\
| |* 注意： |\
| |   * 第一次使用需在飞书应用授权管理开通火山方舟知识库授权 |\
| |   * 用户有下载权限的文档才能支持导入 |\
| |   * 导入的文档是一次性的，后续文档变更不会被自动同步到知识库 |

# 支持文档格式说明
知识库支持结构化和非结构化两大类文档，不同类型文档支持规格请参考：[知识库配额说明](https://www.volcengine.com/docs/84313/1339026)

| || || \
|非结构化文档 | |结构化文档 | |
|---|---|---|---|
| | | | | \
|**文档类型** |**规格** |**文档类型** |**规格** |
| | | | | \
|pdf |350 MB, 5000 页 |jsonl |30000 行 |
| | | | | \
|doc |350 MB |csv |50 sheet, 文件行数总和30000 行 |
| | | | | \
|docx |350 MB |xlsx |50 sheet, 文件行数总和30000 行 |
| | | | | \
|pptx |350 MB | | |
| | | | | \
|markdown |5 MB | | |
| | | | | \
|txt |5 MB | | |
| | | | | \
|faq.xlsx |50 sheet, 文件行数总和 30000 行 | | |

:::tip
**对于 faq 特殊格式的说明：**上传文档时，需要通过特殊的后缀 .faq 进行标识，格式为：文档名.faq.xlsx；文档固定格式为一列问题、一列答案，示例：
<Attachment link="https://p9-arcosite.byteimg.com/tos-cn-i-goo7wpa0wc/0139efbb795f4d25b048ca72c44371da~tplv-goo7wpa0wc-image.image" name="Q&A问答对示例.faq.xlsx" ></Attachment>
**解析限制说明**：对于问题或答案为空的行会跳过不做处理。
:::
# 文档同步说明
## 文档内容更新如何同步到知识库
目前知识库文档的更新需要用户再次上传目标文档，利用相同的 doc_id 实现对原文档的覆盖更新。
对于更新的文档同步到知识库的具体操作，可参考以下说明：

* 通过界面上传

利用公开下载链接，指定新文档的文件 ID 为需要替换掉的原文档 ID，即可实现文件覆盖更新。
![Image](https://p9-arcosite.byteimg.com/tos-cn-i-goo7wpa0wc/e25a039261de4c5c96a23183f400ef32~tplv-goo7wpa0wc-image.image =955x)

* 通过 API 或 SDK 上传

使用 /api/knowledge/doc/add 接口上传文档时，指定 doc_id 为需要替换的文档 ID，即可实现文档和切片内容的覆盖。
需要注意的是，"add_type" == "tos" 时，该字段无效，需参考 TOS 上完成 doc_id 的定义 。
## 文件夹下增量文档更新如何同步到知识库
目前知识库仅支持【从 TOS 中导入】实现增量文档更新。
当已导入的 TOS 目录下有新文件存在，再次导入该目录，知识库会自动根据是否已有同名文档进行判断，并将未导入的文档上传到知识库中。同名的重复文档则会自动跳过，不会再次上传知识库。
对于增量文档更新的具体操作，可参考以下说明：
【方式一】通过界面操作
在导入文档页面选择从 TOS 中导入，再次导入同一个目录。
【方式二】通过 API 操作
通过[文档上传接口](https://www.volcengine.com/docs/84313/1254624)，add_type 选择 tos ，tos_path 填写同一个目录路径。