# 联网搜索 Web Search 
{"version":"1.2.31","data":{"0":{"ops":[{"insert":"*","attributes":{"lineId":"my8wi0rsqx","lmkr":"1"}},{"insert":"Web Search 是一款基础联网搜索工具，能通过 Responses API 为您的大模型获取实时的公开网络信息（如新闻、商品、天气等）。\n"},{"insert":"*","attributes":{"lineId":"myjj60rt0g","lmkr":"1"}},{"insert":"使用此工具可以解决数据时效性、知识盲区、信息同步等核心问题，并且您无需自行开发搜索引擎或维护数据资源。\n"},{"insert":"*","attributes":{"anchor":"#v7Us2ZbDGr","heading":"h2","lineId":"myn9b0rupo","lmkr":"1"}},{"insert":"核心功能","attributes":{"bold":"true"}},{"insert":"\n"},{"insert":"*","attributes":{"lineId":"myq400rvvp","list":"bullet1","lmkr":"1","origin-start":"1","start":"1"}},{"insert":"多轮自动搜索","attributes":{"bold":"true"}},{"insert":"：针对复杂问题，模型会自动判断是否需要补充搜索，您无需手动触发。\n"},{"insert":"*","attributes":{"lineId":"myud20rwpc","list":"bullet1","lmkr":"1","origin-start":"1","start":"1"}},{"insert":"图文输入兼容","attributes":{"bold":"true"}},{"insert":"：支持 VLM 模型接收图文混合输入，并根据图片识别结果搜索相关信息。\n"},{"insert":"*","attributes":{"lineId":"myz4s0rx3b","list":"bullet1","lmkr":"1","origin-start":"1","start":"1"}},{"insert":"多工具混合调用","attributes":{"bold":"true"}},{"insert":"：可与自定义 Function、MCP 等工具协同使用，模型会自动判断调用优先级。\n"},{"insert":"*","attributes":{"lineId":"mz4ea0ry7h","list":"bullet1","lmkr":"1","origin-start":"1","start":"1"}},{"insert":"响应模式灵活","attributes":{"bold":"true"}},{"insert":"：支持同步和流式两种响应。流式模式可实时返回思考、搜索、回答的全过程。\n"},{"insert":"*","attributes":{"anchor":"#e50bf2dd","heading":"h2","lineId":"mz76h0rzk4","lmkr":"1"}},{"insert":"前提条件\n"},{"insert":"*","attributes":{"lineId":"mz9zs0s0x6","list":"bullet1","lmkr":"1","origin-start":"1","start":"1"}},{"insert":"获取 API Key","attributes":{"hyperlink":"{\"href\":\"https://console.volcengine.com/ark/region:ark+cn-beijing/apiKey\",\"linkId\":\"Ij6zwwvHJ6\",\"newTab\":true}"}},{"insert":"\n"},{"insert":"*","attributes":{"lineId":"mzdhk0s1b9","list":"bullet1","lmkr":"1","origin-start":"1","start":"1"}},{"insert":"开通模型服务","attributes":{"hyperlink":"{\"href\":\"https://console.volcengine.com/ark/openManagement\",\"linkId\":\"TAZwhBKnGi\",\"newTab\":true}"}},{"insert":"\n"},{"insert":"*","attributes":{"lineId":"mzghk0s23k","list":"bullet1","lmkr":"1","origin-start":"1","start":"1"}},{"insert":"在 "},{"insert":"模型列表","attributes":{"hyperlink":"{\"href\":\"/docs/82379/1330310\",\"linkId\":\"GStyWG5QoT\",\"newTab\":true}"}},{"insert":" 获取所需 Model ID\n"},{"insert":"*","attributes":{"lineId":"mzj000s3rs","list":"bullet2","lmkr":"1","origin-start":"1","start":"1"}},{"insert":"通过 Endpoint ID 调用模型服务，请参考 "},{"insert":"获取 Endpoint ID（创建自定义推理接入点）","attributes":{"hyperlink":"{\"href\":\"/docs/82379/1099522\",\"linkId\":\"MVACWDsJsK\",\"newTab\":true}"}},{"insert":"。\n"},{"insert":"*","attributes":{"anchor":"#b44cae6e","heading":"h2","lineId":"mzlxr0s480","lmkr":"1"}},{"insert":"快速入门","attributes":{"bold":"true"}},{"insert":"\n"},{"insert":"*","attributes":{"lineId":"mzoa30s5h8","lmkr":"1","tips":"{\"type\":\"tip\",\"isTitle\":true}"}},{"insert":"说明\n"},{"insert":"*","attributes":{"lineId":"mzs300s6bm","lmkr":"1","tips":"{\"type\":\"tip\"}"}},{"insert":"使用Web Search 基础联网搜索工具前，需要"},{"insert":"开通“联网内容插件”。","attributes":{"bold":"true"}},{"insert":"\n"},{"insert":"*","attributes":{"anchor":"#21052a40","heading":"h3","lineId":"mzvwh0s7bb","lmkr":"1"}},{"insert":"开通流程\n"},{"insert":"*","attributes":{"lineId":"n007i0s84h","list":"number1","lmkr":"1","origin-start":"1","start":"1"}},{"insert":"访问"},{"insert":"方舟控制台-组件库","attributes":{"hyperlink":"{\"href\":\"https://console.volcengine.com/ark/region:ark+cn-beijing/components\",\"linkId\":\"ejR8XOAHS8\",\"newTab\":true}"}},{"insert":"，选择开通 “联网内容插件”。\n"},{"insert":"*","attributes":{"lineId":"n02jk0s95w","list":"number1","lmkr":"1","origin-start":"2","start":"2"}},{"insert":"具体收费标准详见 "},{"insert":"联网系列产品计费","attributes":{"hyperlink":"{\"href\":\"/docs/82379/1262333\",\"linkId\":\"viOQoCkI5m\",\"newTab\":true}"}},{"insert":"。注意，"},{"insert":"一轮搜索调用可能会发起多个关键词同时搜索，会多次使用联网内容插件，您可以通过 max_keyword 参数来限制一轮搜索最大的关键词数量。","attributes":{"bold":"true"}},{"insert":"\n"},{"insert":"*","attributes":{"anchor":"#dc8effde","heading":"h3","lineId":"n058e0sa3x","lmkr":"1"}},{"insert":"快速开始\n"},{"insert":"*","attributes":{"lineId":"luP2w5be","lmkr":"1"}},{"insert":" ","attributes":{"tabs":"true","tabsZoneId":"PwLAvnUREN","zoneType":"Z"}},{"insert":"*","attributes":{"anchor":"#19b51cc2","heading":"h2","lineId":"n080v0sb2y","lmkr":"1"}},{"insert":"参数说明","attributes":{"bold":"true"}},{"insert":"\n"},{"insert":"*","attributes":{"lineId":"n0axi0scjb","lmkr":"1"}},{"insert":"详情请参见 "},{"insert":"创建Responses模型请求","attributes":{"hyperlink":"{\"href\":\"https://www.volcengine.com/docs/82379/1569618\",\"linkId\":\"OD2hwb2wDw\",\"newTab\":true}"}},{"insert":"。\n"},{"insert":"*","attributes":{"anchor":"#fab8ba6d","heading":"h2","lineId":"n0d210sdv0","lmkr":"1"}},{"insert":"支持模型列表","attributes":{"bold":"true"}},{"insert":"\n"},{"insert":"*","attributes":{"lineId":"n0g490sesk","lmkr":"1"}},{"insert":"参见"},{"insert":"联网搜索工具","attributes":{"hyperlink":"{\"href\":\"/docs/82379/1330310#dd261e17\",\"linkId\":\"ZEo1ZcJ313\",\"newTab\":true}"}},{"insert":"。\n"},{"insert":"*","attributes":{"blockquote":"true","lineId":"n0ids0sfud","lmkr":"1","wrapperIndent":"0"}},{"insert":"关于thinking 模式的设置可以参考"},{"insert":"关闭深度思考","attributes":{"hyperlink":"{\"href\":\"/docs/82379/1449737#fa3f44fa\",\"linkId\":\"Rkzj1j9QJk\",\"newTab\":true}"}},{"insert":"。\n"},{"insert":"*","attributes":{"anchor":"#569e71b9","heading":"h2","lineId":"n0laf0sg8t","lmkr":"1"}},{"insert":"使用指南\n"},{"insert":"*","attributes":{"lineId":"n0pa10sh6l","lmkr":"1"}},{"insert":"本节介绍了常见的使用场景及其字段设置方法，以帮助您更高效地运用联网搜索功能。完整的参考代码见本节末尾。\n"},{"insert":"*","attributes":{"anchor":"#b3a6340e","heading":"h3","lineId":"n0tk70sitt","lmkr":"1"}},{"insert":"1. 开启流式调用\n"},{"insert":"*","attributes":{"lineId":"n0xqh0sj6c","lmkr":"1"}},{"insert":"通过在 response 中设置stream=True，可以开启流式调用，使响应以流式方式返回，从而更快地获取部分结果。\n"},{"insert":" ","attributes":{"language":"Python","type":"codeblock","zoneId":"yqehUqIve9"}},{"insert":"\n"},{"insert":"*","attributes":{"anchor":"#4a053e74","heading":"h3","lineId":"n11pt0sk3j","lmkr":"1"}},{"insert":"2.设置搜索来源\n"},{"insert":"*","attributes":{"lineId":"n14hg0slzm","lmkr":"1"}},{"insert":"默认情况下，联网搜索工具会通过 search_engine 搜索全网内容。您也可以通过在 tools 中设置 sources 字段，来添加额外的内容源以优化搜索结果。可用的附加搜索源包括：\n"},{"insert":"*","attributes":{"lineId":"n16jr0sm9j","list":"bullet1","lmkr":"1","origin-start":"1","start":"1"}},{"insert":"\"douyin\"：抖音百科\n"},{"insert":"*","attributes":{"lineId":"n18tu0snsh","list":"bullet1","lmkr":"1","origin-start":"1","start":"1"}},{"insert":"\"moji\"：墨迹天气\n"},{"insert":"*","attributes":{"lineId":"n1ais0sogc","list":"bullet1","lmkr":"1","origin-start":"1","start":"1"}},{"insert":"\"toutiao\"：头条图文\n"},{"insert":" ","attributes":{"language":"Python","type":"codeblock","zoneId":"s7sgR5y3N8"}},{"insert":"\n"},{"insert":"*","attributes":{"anchor":"#68c643c8","heading":"h3","lineId":"n1crs0spd0","lmkr":"1"}},{"insert":"3.用户地理位置\n"},{"insert":"*","attributes":{"lineId":"n1eiy0sq4f","lmkr":"1"}},{"insert":"您可以在 tools 中设置 user_location 字段，并提供用户的国家、地区和城市信息，以优化与地理位置相关的搜索结果。\n"},{"insert":" ","attributes":{"language":"Python","type":"codeblock","zoneId":"DvHeWjrXmQ"}},{"insert":"\n"},{"insert":"*","attributes":{"anchor":"#57cc853a","heading":"h3","lineId":"n1gnr0sr0u","lmkr":"1"}},{"insert":"4.设置最大搜索关键词数量\n"},{"insert":"*","attributes":{"lineId":"n1ie30ss3t","lmkr":"1"}},{"insert":"您可以设置 max_keyword 参数来限制单轮搜索中使用的关键词上限。该参数的取值范围是 1 到 50。\n"},{"insert":"*","attributes":{"lineId":"n1k3m0stou","lmkr":"1"}},{"insert":"例如，如果模型判断需要搜索三个关键词（如“大模型最新进展”、“2025年科技创新”、“火山方舟进展”），但您将 max_keyword 设置为 1，那么模型将仅使用第一个关键词“大模型最新进展”进行搜索。\n"},{"insert":" ","attributes":{"language":"Python","type":"codeblock","zoneId":"vs7EMV6PXj"}},{"insert":"\n"},{"insert":"*","attributes":{"anchor":"#MNcGnHGEfF","heading":"h3","lineId":"n1lto0su57","lmkr":"1"}},{"insert":"5. 查询搜索用量\n"},{"insert":"*","attributes":{"lineId":"n1nzb0svlq","lmkr":"1"}},{"insert":"您可以在 API 返回的参数中查看联网内容插件的使用情况：\n"},{"insert":"*","attributes":{"lineId":"n1q7q0swt4","list":"bullet1","lmkr":"1","origin-start":"1","start":"1"}},{"insert":"usage.tool_usage：显示插件的总调用次数。\n"},{"insert":"*","attributes":{"lineId":"n1s8n0sxbb","list":"bullet1","lmkr":"1","origin-start":"1","start":"1"}},{"insert":"usage.tool_usage_details：显示每个搜索源（如 search_engine、toutiao）的详细调用次数。\n"},{"insert":"*","attributes":{"anchor":"#b87a8642","heading":"h3","lineId":"n1u6s0sy5r","lmkr":"1"}},{"insert":"完整示例代码\n"},{"insert":" ","attributes":{"language":"Python","type":"codeblock","zoneId":"GOKnUpodlx"}},{"insert":"\n"},{"insert":" ","attributes":{"language":"Python","type":"codeblock","zoneId":"tBbgD4jHKj"}},{"insert":"\n"},{"insert":"*","attributes":{"anchor":"#c90759bd","heading":"h2","lineId":"n1w6v0szwd","lmkr":"1"}},{"insert":"最佳实践\n"},{"insert":"*","attributes":{"anchor":"#dd0bb90d","heading":"h3","lineId":"n1ypv0t0g8","lmkr":"1"}},{"insert":"边想边搜使用示例\n"},{"insert":"*","attributes":{"lineId":"n236g0t1wk","lmkr":"1"}},{"insert":"以下代码通过 OpenAI SDK 调用火山方舟 Web Search 工具，实现 “AI 思考 - 联网搜索 - 答案生成” 全链路自动化，可针对时效、盲区、动态信息类问题自动触发工具补数据，通过流式响应实时输出思考、搜索、回答过程，保障信息可追溯、决策可感知。\n"},{"insert":" ","attributes":{"language":"Python","type":"codeblock","zoneId":"OeuFt2nhXo"}},{"insert":"\n"},{"insert":"*","attributes":{"anchor":"#3b78b29e","heading":"h3","lineId":"n26xz0t2fo","lmkr":"1"}},{"insert":"系统提示词示例\n"},{"insert":"*","attributes":{"lineId":"n29fv0t37g","lmkr":"1"}},{"insert":"系统提示词的设置对搜索请求有着较大影响，建议进行优化以提升搜索的准确性与效率。以下为您提供两种系统提示词模板示例，供您在实际应用中参考。\n"},{"insert":"*","attributes":{"anchor":"#a923a31c","heading":"h4","lineId":"n2cy80t4nz","lmkr":"1"}},{"insert":"模板一\n"},{"insert":" ","attributes":{"language":"Python","type":"codeblock","zoneId":"cD8tgKkmYf"}},{"insert":"\n"},{"insert":"*","attributes":{"anchor":"#6f452d11","heading":"h4","lineId":"n2fa90t5f3","lmkr":"1"}},{"insert":"模板二\n"},{"insert":" ","attributes":{"language":"Python","type":"codeblock","zoneId":"rF5njMtQhO"}},{"insert":"\n"},{"insert":"*","attributes":{"anchor":"#9d93754d","heading":"h2","lineId":"n2idb0t6c4","lmkr":"1"}},{"insert":"常见问题\n"},{"insert":"*","attributes":{"lineId":"n2kz30t7dy","list":"number1","lmkr":"1","origin-start":"1","start":"1"}},{"insert":"命名冲突：自定义Function名称避免与“web_search”重复，否则模型将按内置优先级判断调用逻辑。\n"},{"insert":"*","attributes":{"lineId":"n2n1e0t8se","list":"number1","lmkr":"1","origin-start":"2","start":"2"}},{"insert":"权限要求：需具备火山方舟平台基础访问权限，默认支持账号维度5QPS，高并发需求可提交工单申请扩容。\n"},{"insert":"*","attributes":{"lineId":"n2q7i0t9il","list":"number1","lmkr":"1","origin-start":"3","start":"3"}},{"insert":"计费说明：按联网内容插件实际使用次数计费，一轮用户查询可能触发多个关键词搜索，可通过合理设置max_keyword参数限制，避免过多关键词导致调用次数增加，建议根据场景设置1~10个。使用方式参见“使用指南”。\n"},{"insert":"*","attributes":{"lineId":"n2unt0tain","list":"number1","lmkr":"1","origin-start":"4","start":"4"}},{"insert":"用量查询：通过响应参数usage.tool_usage（总次数）和usage.tool_usage_details（明细）查看插件使用情况。使用方式参见“使用指南”。\n"},{"insert":"*","attributes":{"lineId":"n2wxm0tb0u","list":"number1","lmkr":"1","origin-start":"5","start":"5"}},{"insert":"错误信息：暂不支持"},{"insert":"caching","attributes":{"inlineCode":"true"}},{"insert":" 参数，使用该参数会返回400错误信息。\n"},{"insert":"*","attributes":{"lineId":"iIEeKKbu","lmkr":"1"}},{"insert":"\n"}],"zoneId":"0","zoneType":"Z"},"CiGTMyxmvv":{"ops":[{"insert":"import","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" os\n"},{"insert":"from","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" volcenginesdkarkruntime "},{"insert":"import","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" Ark\n"},{"insert":"\n"},{"insert":"# 从环境变量中获取您的API KEY，配置方法见：https://www.volcengine.com/docs/82379/1399008","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n"},{"insert":"api_key = os.getenv("},{"insert":"'ARK_API_KEY'","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":")\n"},{"insert":"\n"},{"insert":"client = Ark(\n"},{"insert":"    base_url="},{"insert":"'https://ark.cn-beijing.volces.com/api/v3'","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":",\n"},{"insert":"    api_key=api_key,\n"},{"insert":")\n"},{"insert":"\n"},{"insert":"tools = [{\n"},{"insert":"    "},{"insert":"\"type\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":": "},{"insert":"\"web_search\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":",\n"},{"insert":"    "},{"insert":"\"max_keyword\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":": "},{"insert":"2","attributes":{"clientside-highlight":"code-hljs-number"}},{"insert":",  \n"},{"insert":"}]\n"},{"insert":"\n"},{"insert":"# 创建一个对话请求","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n"},{"insert":"response = client.responses.create(\n"},{"insert":"    model="},{"insert":"\"doubao-seed-1-6-251015\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":",\n"},{"insert":"    "},{"insert":"input","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"=[{"},{"insert":"\"role\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":": "},{"insert":"\"user\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":", "},{"insert":"\"content\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":": "},{"insert":"\"今天有什么热点新闻？\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"}],\n"},{"insert":"    tools=tools,\n"},{"insert":")\n"},{"insert":"\n"},{"insert":"print","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"(response)\n"}],"zoneId":"CiGTMyxmvv","zoneType":"Z"},"DvHeWjrXmQ":{"ops":[{"insert":"*","attributes":{"lineId":"JZqMoMk1","lmkr":"1"}},{"insert":"tools=[\n"},{"insert":"*","attributes":{"lineId":"vo6K8XTE","lmkr":"1"}},{"insert":"    {\n"},{"insert":"*","attributes":{"lineId":"io6l45bU","lmkr":"1"}},{"insert":"      "},{"insert":"  \"type\": \"web_search\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":","},{"insert":"  # 配置工具类型为基础联网搜索功能 ","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n"},{"insert":"*","attributes":{"lineId":"c2hNq5yH","lmkr":"1"}},{"insert":"     "},{"insert":"   \"user_location\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":": "},{"insert":"{  # 用户地理位置（用于优化搜索结果）","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n"},{"insert":"*","attributes":{"lineId":"fGlGwTaN","lmkr":"1"}},{"insert":"        "},{"insert":"    \"type\": \"approximate\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":",  # 大致位置","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n"},{"insert":"*","attributes":{"lineId":"TB9afBMF","lmkr":"1"}},{"insert":"       "},{"insert":"     \"country\": \"中国\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":",\n"},{"insert":"*","attributes":{"lineId":"ZB7ljZpO","lmkr":"1"}},{"insert":"      "},{"insert":"      \"region\": \"浙江\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":",\n"},{"insert":"*","attributes":{"lineId":"91spmbR5","lmkr":"1"}},{"insert":"     "},{"insert":"       \"city\": \"杭州\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"\n"},{"insert":"*","attributes":{"lineId":"69oXrcJi","lmkr":"1"}},{"insert":"        }\n"},{"insert":"*","attributes":{"lineId":"Hs1W8O7f","lmkr":"1"}},{"insert":"    }\n"},{"insert":"*","attributes":{"lineId":"jujjnulV","lmkr":"1"}},{"insert":"],\n"}],"zoneId":"DvHeWjrXmQ","zoneType":"Z"},"FPjk08138f":{"ops":[{"insert":" ","attributes":{"language":"Python","type":"codeblock","zoneId":"Q4cDuFZZNS"}},{"insert":"\n"}],"zoneId":"FPjk08138f","zoneType":"Z"},"GOKnUpodlx":{"ops":[{"insert":"*","attributes":{"lineId":"nYQlwKYj","lmkr":"1"}},{"insert":"import","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" os\n"},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-keyword","lineId":"ZoDxzfTz","lmkr":"1"}},{"insert":"from","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" volcenginesdkarkruntime"},{"insert":" import","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" Ark\n"},{"insert":"*","attributes":{"lineId":"u7bQ4F0v","lmkr":"1"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"BYLQexUX","lmkr":"1"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"0iySACWR","lmkr":"1"}},{"insert":"# 从环境变量中获取API KEY","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n"},{"insert":"*","attributes":{"lineId":"MEjnQrFn","lmkr":"1"}},{"insert":"api_key = os.ge"},{"insert":"tenv('ARK_API_KEY'","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":")\n"},{"insert":"*","attributes":{"lineId":"4GYNlJKt","lmkr":"1"}},{"insert":"\n"},{"insert":"*","attributes":{"lineId":"6TEsvu94","lmkr":"1"}},{"insert":"\n"},{"insert":"*","attributes":{"lineId":"KKALzLir","lmkr":"1"}},{"insert":"client = Ark(\n"},{"insert":"*","attributes":{"lineId":"9HRrcuca","lmkr":"1"}},{"insert":"    "},{"insert":"base_url='https://ark.cn-beijing.volces.com/api/v3'","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":",\n"},{"insert":"*","attributes":{"lineId":"aojcB5Aq","lmkr":"1"}},{"insert":"    api_key=api_key,\n"},{"insert":"*","attributes":{"lineId":"cEvJCwra","lmkr":"1"}},{"insert":")\n"},{"insert":"*","attributes":{"lineId":"thPfulKa","lmkr":"1"}},{"insert":"\n"},{"insert":"*","attributes":{"lineId":"cOe8LuwD","lmkr":"1"}},{"insert":"\n"},{"insert":"*","attributes":{"lineId":"di8IFx7c","lmkr":"1"}},{"insert":"t"},{"insert":"ools = [{\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"Xl9SFudt","lmkr":"1"}},{"insert":"    \"type\": \"web_search\",\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"VQChagFe","lmkr":"1"}},{"insert":"    \"max_keyword\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":": 3","attributes":{"clientside-highlight":"code-hljs-number"}},{"insert":",  \n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"m1Mkk9gJ","lmkr":"1"}},{"insert":"    \"sources\": [\"douyin\", \"moji\", \"toutiao\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"],\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"PgbruWp6","lmkr":"1"}},{"insert":"}]\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"Rcbvbyeq","lmkr":"1"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"1f8nx9pQ","lmkr":"1"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"kfkmFsAb","lmkr":"1"}},{"insert":"# 发送流式请求","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n"},{"insert":"*","attributes":{"lineId":"fYQhqXQe","lmkr":"1"}},{"insert":"response = client.respon"},{"insert":"ses.create(\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"gKdlWJNX","lmkr":"1"}},{"insert":"    model=\"doubao-seed-1-6-251015\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":",\n","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-built_in","lineId":"ohM27tqH","lmkr":"1"}},{"insert":"    input","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"=[{\"role\": \"user\", \"content\": \"搜索一下大模型领域最近有什么热门的科技新闻？火山方舟最近发布了什么新模型\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"}],\n"},{"insert":"*","attributes":{"lineId":"7ylqzhkP","lmkr":"1"}},{"insert":"   "},{"insert":" tools=tools,\n","attributes":{"clientside-highlight":"code-hljs-literal"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-literal","lineId":"X3fzDDeu","lmkr":"1"}},{"insert":"    stream=True","attributes":{"clientside-highlight":"code-hljs-literal"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"zrqMI0Pn","lmkr":"1"}},{"insert":")\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"smDJICDS","lmkr":"1"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"gq96Zhjr","lmkr":"1"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"rvMvrfDP","lmkr":"1"}},{"insert":"# 存储最终事件（用于提取usage）","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-literal"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-literal","lineId":"iH18QXHV","lmkr":"1"}},{"insert":"final_event = None","attributes":{"clientside-highlight":"code-hljs-literal"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-keyword","lineId":"x2w3JRFK","lmkr":"1"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-keyword","lineId":"hpTO9uqO","lmkr":"1"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-keyword","lineId":"Q7GRgJ6z","lmkr":"1"}},{"insert":"for event in","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" response:\n","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-built_in","lineId":"qkfzmYLt","lmkr":"1"}},{"insert":"    print","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"(event)  # 打印所有事件\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"tysaOyph","lmkr":"1"}},{"insert":"    # 捕获最终完成事件","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-keyword","lineId":"n0bjnXuV","lmkr":"1"}},{"insert":"    if","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" event.type","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":" == \"response.completed\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":":\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"neVNF1bd","lmkr":"1"}},{"insert":"        final_event = event\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"EIiDdFnG","lmkr":"1"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"Yf8BNSxU","lmkr":"1"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"DOFzwA3Q","lmkr":"1"}},{"insert":"# 提取工具使用统计","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-keyword","lineId":"c0sFn74I","lmkr":"1"}},{"insert":"if","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" final_event:\n"},{"insert":"*","attributes":{"lineId":"102uJlEm","lmkr":"1"}},{"insert":"    tool_usage = final_event.response.usage.tool_usage\n"},{"insert":"*","attributes":{"lineId":"prvgzkia","lmkr":"1"}},{"insert":"    tool_usage_details = final_"},{"insert":"event.response.usage.tool_usage_details\n","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-built_in","lineId":"FWIDs3Fu","lmkr":"1"}},{"insert":"    print","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"(\"\\n===== 工具使用统计 =====\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":")\n","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-built_in","lineId":"CVPU7Fx5","lmkr":"1"}},{"insert":"    print","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"(f\"tool_usage: ","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"{tool_usage}","attributes":{"clientside-highlight":"code-hljs-subst"}},{"insert":"\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":")\n","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-built_in","lineId":"ONI4Sadk","lmkr":"1"}},{"insert":"    print","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"(f\"tool_usage_details: ","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"{tool_usage_details}","attributes":{"clientside-highlight":"code-hljs-subst"}},{"insert":"\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":")\n"}],"zoneId":"GOKnUpodlx","zoneType":"Z"},"HFqcVOQjzK":{"ops":[{"insert":" ","attributes":{"language":"Go","type":"codeblock","zoneId":"HlWeBfsxBP"}},{"insert":"\n"}],"zoneId":"HFqcVOQjzK","zoneType":"Z"},"HlWeBfsxBP":{"ops":[{"insert":"package","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" main\n"},{"insert":"\n"},{"insert":"import","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" (\n"},{"insert":"        "},{"insert":"\"context\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"\n"},{"insert":"        "},{"insert":"\"fmt\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"\n"},{"insert":"        "},{"insert":"\"github.com/volcengine/volcengine-go-sdk/service/arkruntime\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"\n"},{"insert":"        "},{"insert":"\"github.com/volcengine/volcengine-go-sdk/service/arkruntime/model/responses\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"\n"},{"insert":"        "},{"insert":"\"io\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"\n"},{"insert":"        "},{"insert":"\"os\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"\n"},{"insert":")\n"},{"insert":"\n"},{"insert":"/**\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":" * Authentication\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":" * If you authorize your endpoint using an API key, you can set your api key to environment variable \"ARK_API_KEY\"\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":" * client := arkruntime.NewClientWithApiKey(os.Getenv(\"ARK_API_KEY\"))\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":" * Note: If you use an API key, this API key will not be refreshed.\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":" * To prevent the API from expiring and failing after some time, choose an API key with no expiration date.\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":" */","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n"},{"insert":"\n"},{"insert":"func","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" ","attributes":{"clientside-highlight":"code-hljs-function"}},{"insert":"main","attributes":{"clientside-highlight":"code-hljs-title"}},{"insert":"()","attributes":{"clientside-highlight":"code-hljs-params"}},{"insert":" {\n"},{"insert":"        stream()\n"},{"insert":"        nonStream()\n"},{"insert":"}\n"},{"insert":"\n"},{"insert":"func","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" ","attributes":{"clientside-highlight":"code-hljs-function"}},{"insert":"nonStream","attributes":{"clientside-highlight":"code-hljs-title"}},{"insert":"()","attributes":{"clientside-highlight":"code-hljs-params"}},{"insert":" {\n"},{"insert":"        fmt.Println("},{"insert":"\"non stream\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":")\n"},{"insert":"        client := arkruntime.NewClientWithApiKey(os.Getenv("},{"insert":"\"ARK_API_KEY\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"))\n"},{"insert":"        ctx := context.Background()\n"},{"insert":"        maxToolCalls := "},{"insert":"int64","attributes":{"clientside-highlight":"code-hljs-type"}},{"insert":"("},{"insert":"1","attributes":{"clientside-highlight":"code-hljs-number"}},{"insert":")\n"},{"insert":"\n"},{"insert":"        inputMessage := \u0026responses.ItemInputMessage{\n"},{"insert":"                Role: responses.MessageRole_user,\n"},{"insert":"                Content: []*responses.ContentItem{\n"},{"insert":"                        {\n"},{"insert":"                                Union: \u0026responses.ContentItem_Text{\n"},{"insert":"                                        Text: \u0026responses.ContentItemText{\n"},{"insert":"                                                Type: responses.ContentItemType_input_text,\n"},{"insert":"                                                Text: "},{"insert":"\"今天有什么热点新闻\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":",\n"},{"insert":"                                        },\n"},{"insert":"                                },\n"},{"insert":"                        },\n"},{"insert":"                },\n"},{"insert":"        }\n"},{"insert":"        createResponsesReq := \u0026responses.ResponsesRequest{\n"},{"insert":"                Model: "},{"insert":"\"doubao-seed-1-6-251015\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":",\n"},{"insert":"                Input: \u0026responses.ResponsesInput{\n"},{"insert":"                        Union: \u0026responses.ResponsesInput_ListValue{\n"},{"insert":"                                ListValue: \u0026responses.InputItemList{ListValue: []*responses.InputItem{{\n"},{"insert":"                                        Union: \u0026responses.InputItem_InputMessage{\n"},{"insert":"                                                InputMessage: inputMessage,\n"},{"insert":"                                        },\n"},{"insert":"                                }}},\n"},{"insert":"                        },\n"},{"insert":"                },\n"},{"insert":"                Tools: []*responses.ResponsesTool{\n"},{"insert":"                        {\n"},{"insert":"                                Union: \u0026responses.ResponsesTool_ToolWebSearch{\n"},{"insert":"                                        ToolWebSearch: \u0026responses.ToolWebSearch{\n"},{"insert":"                                                Type: responses.ToolType_web_search,\n"},{"insert":"                                        },\n"},{"insert":"                                },\n"},{"insert":"                        },\n"},{"insert":"                },\n"},{"insert":"                MaxToolCalls: \u0026maxToolCalls,\n"},{"insert":"        }\n"},{"insert":"\n"},{"insert":"        resp, err := client.CreateResponses(ctx, createResponsesReq)\n"},{"insert":"        "},{"insert":"if","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" err != "},{"insert":"nil","attributes":{"clientside-highlight":"code-hljs-literal"}},{"insert":" {\n"},{"insert":"                fmt.Printf("},{"insert":"\"stream error: %v\\n\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":", err)\n"},{"insert":"                "},{"insert":"return","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":"\n"},{"insert":"        }\n"},{"insert":"\n"},{"insert":"        fmt.Printf("},{"insert":"\"resp: %v\\n\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":", resp)\n"},{"insert":"        fmt.Println()\n"},{"insert":"}\n"},{"insert":"\n"},{"insert":"func","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" ","attributes":{"clientside-highlight":"code-hljs-function"}},{"insert":"stream","attributes":{"clientside-highlight":"code-hljs-title"}},{"insert":"()","attributes":{"clientside-highlight":"code-hljs-params"}},{"insert":" {\n"},{"insert":"        fmt.Println("},{"insert":"\"stream\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":")\n"},{"insert":"        client := arkruntime.NewClientWithApiKey(os.Getenv("},{"insert":"\"ARK_API_KEY\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"))\n"},{"insert":"        ctx := context.Background()\n"},{"insert":"        maxToolCalls := "},{"insert":"int64","attributes":{"clientside-highlight":"code-hljs-type"}},{"insert":"("},{"insert":"1","attributes":{"clientside-highlight":"code-hljs-number"}},{"insert":")\n"},{"insert":"\n"},{"insert":"        inputMessage := \u0026responses.ItemInputMessage{\n"},{"insert":"                Role: responses.MessageRole_user,\n"},{"insert":"                Content: []*responses.ContentItem{\n"},{"insert":"                        {\n"},{"insert":"                                Union: \u0026responses.ContentItem_Text{\n"},{"insert":"                                        Text: \u0026responses.ContentItemText{\n"},{"insert":"                                                Type: responses.ContentItemType_input_text,\n"},{"insert":"                                                Text: "},{"insert":"\"今天有什么热点新闻\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":",\n"},{"insert":"                                        },\n"},{"insert":"                                },\n"},{"insert":"                        },\n"},{"insert":"                },\n"},{"insert":"        }\n"},{"insert":"        createResponsesReq := \u0026responses.ResponsesRequest{\n"},{"insert":"                Model: "},{"insert":"\"doubao-seed-1-6-251015\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":",\n"},{"insert":"                Input: \u0026responses.ResponsesInput{\n"},{"insert":"                        Union: \u0026responses.ResponsesInput_ListValue{\n"},{"insert":"                                ListValue: \u0026responses.InputItemList{ListValue: []*responses.InputItem{{\n"},{"insert":"                                        Union: \u0026responses.InputItem_InputMessage{\n"},{"insert":"                                                InputMessage: inputMessage,\n"},{"insert":"                                        },\n"},{"insert":"                                }}},\n"},{"insert":"                        },\n"},{"insert":"                },\n"},{"insert":"                Tools: []*responses.ResponsesTool{\n"},{"insert":"                        {\n"},{"insert":"                                Union: \u0026responses.ResponsesTool_ToolWebSearch{\n"},{"insert":"                                        ToolWebSearch: \u0026responses.ToolWebSearch{\n"},{"insert":"                                                Type: responses.ToolType_web_search,\n"},{"insert":"                                        },\n"},{"insert":"                                },\n"},{"insert":"                        },\n"},{"insert":"                },\n"},{"insert":"                MaxToolCalls: \u0026maxToolCalls,\n"},{"insert":"        }\n"},{"insert":"\n"},{"insert":"        resp, err := client.CreateResponsesStream(ctx, createResponsesReq)\n"},{"insert":"        "},{"insert":"if","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" err != "},{"insert":"nil","attributes":{"clientside-highlight":"code-hljs-literal"}},{"insert":" {\n"},{"insert":"                fmt.Printf("},{"insert":"\"stream error: %v\\n\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":", err)\n"},{"insert":"                "},{"insert":"return","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":"\n"},{"insert":"        }\n"},{"insert":"\n"},{"insert":"        "},{"insert":"for","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" {\n"},{"insert":"                event, err := resp.Recv()\n"},{"insert":"                "},{"insert":"if","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" err == io.EOF {\n"},{"insert":"                        "},{"insert":"break","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":"\n"},{"insert":"                }\n"},{"insert":"                "},{"insert":"if","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" err != "},{"insert":"nil","attributes":{"clientside-highlight":"code-hljs-literal"}},{"insert":" {\n"},{"insert":"                        fmt.Printf("},{"insert":"\"stream error: %v\\n\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":", err)\n"},{"insert":"                        "},{"insert":"return","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":"\n"},{"insert":"                }\n"},{"insert":"                handleEvent(event)\n"},{"insert":"        }\n"},{"insert":"\n"},{"insert":"        fmt.Println()\n"},{"insert":"}\n"},{"insert":"\n"},{"insert":"func","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" ","attributes":{"clientside-highlight":"code-hljs-function"}},{"insert":"handleEvent","attributes":{"clientside-highlight":"code-hljs-title"}},{"insert":"(event *responses.Event)","attributes":{"clientside-highlight":"code-hljs-params"}},{"insert":" {\n"},{"insert":"        "},{"insert":"switch","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" event.GetEventType() {\n"},{"insert":"        "},{"insert":"case","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" responses.EventType_response_reasoning_summary_text_delta.String():\n"},{"insert":"                "},{"insert":"print","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"(event.GetReasoningText().GetDelta())\n"},{"insert":"        "},{"insert":"case","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" responses.EventType_response_reasoning_summary_text_done.String(): "},{"insert":"// aggregated reasoning text","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n"},{"insert":"                fmt.Printf("},{"insert":"\"\\naggregated reasoning text: %s\\n\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":", event.GetReasoningText().GetText())\n"},{"insert":"        "},{"insert":"case","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" responses.EventType_response_output_text_delta.String():\n"},{"insert":"                "},{"insert":"print","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"(event.GetText().GetDelta())\n"},{"insert":"        "},{"insert":"case","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" responses.EventType_response_output_text_done.String(): "},{"insert":"// aggregated output text","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n"},{"insert":"                fmt.Printf("},{"insert":"\"\\naggregated output text: %s\\n\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":", event.GetText().GetText())\n"},{"insert":"        "},{"insert":"case","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" responses.EventType_response_output_item_done.String():\n"},{"insert":"                "},{"insert":"if","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" event.GetItem().GetItem().GetFunctionMcpApprovalRequest() != "},{"insert":"nil","attributes":{"clientside-highlight":"code-hljs-literal"}},{"insert":" {\n"},{"insert":"                        fmt.Printf("},{"insert":"\"\\nmcp call: %s; arguments %s\\n\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":", event.GetItem().GetItem().GetFunctionMcpApprovalRequest().GetName(), event.GetItem().GetItem().GetFunctionMcpApprovalRequest().GetArguments())\n"},{"insert":"                }\n"},{"insert":"        "},{"insert":"case","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" responses.EventType_response_mcp_call_arguments_delta.String():\n"},{"insert":"                fmt.Printf("},{"insert":"\"\\nmcp call arguments: %s\\n\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":", event.GetResponseMcpCallArgumentsDelta().GetDelta())\n"},{"insert":"        "},{"insert":"case","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" responses.EventType_response_mcp_call_completed.String():\n"},{"insert":"                fmt.Printf("},{"insert":"\"\\nmcp call completed.\\n\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":")\n"},{"insert":"        "},{"insert":"case","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" responses.EventType_response_mcp_list_tools_in_progress.String():\n"},{"insert":"                fmt.Printf("},{"insert":"\"\\nlisting mcp tools.\\n\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":")\n"},{"insert":"        "},{"insert":"case","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" responses.EventType_response_mcp_list_tools_completed.String():\n"},{"insert":"                fmt.Printf("},{"insert":"\"\\nDone listing mcp tools.\\n\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":")\n"},{"insert":"        "},{"insert":"default","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":":\n"},{"insert":"                "},{"insert":"return","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":"\n"},{"insert":"        }\n"},{"insert":"}\n"}],"zoneId":"HlWeBfsxBP","zoneType":"Z"},"OeuFt2nhXo":{"ops":[{"insert":"*","attributes":{"lineId":"8902GXQR","lmkr":"1"}},{"insert":"import","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" os\n"},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-keyword","lineId":"XGZPKciU","lmkr":"1"}},{"insert":"from","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" openai"},{"insert":" import","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" OpenAI"},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-keyword","lineId":"WsLu3HvC","lmkr":"1"}},{"insert":"from","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" datetim"},{"insert":"e import","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" datetime"},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-keyword","lineId":"IddqlUVd","lmkr":"1"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-keyword","lineId":"y2yyihJp","lmkr":"1"}},{"insert":"def","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" realize_think_while_search","attributes":{"clientside-highlight":"code-hljs-title function_"}},{"insert":"():\n"},{"insert":"*","attributes":{"lineId":"ppUSGVgw","lmkr":"1"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"0TQjGNNX","lmkr":"1"}},{"insert":"    # 1. 初始化OpenAI客户端","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n"},{"insert":"*","attributes":{"lineId":"Y8b8fh7y","lmkr":"1"}},{"insert":"    client = OpenAI(\n"},{"insert":"*","attributes":{"lineId":"eDWpsucW","lmkr":"1"}},{"insert":"        b"},{"insert":"ase_url=\"https://ark.cn-beijing.volces.com/api/v3\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":", \n"},{"insert":"*","attributes":{"lineId":"tquUrAW9","lmkr":"1"}},{"insert":"        api_key=o"},{"insert":"s.getenv(\"ARK_API_KEY\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":")\n"},{"insert":"*","attributes":{"lineId":"XiVJqhQQ","lmkr":"1"}},{"insert":" "},{"insert":"   )\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"hgjjRmLC","lmkr":"1"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"Xv4wfEI4","lmkr":"1"}},{"insert":"    # 2. 定义系统提示词（核心：规范“何时搜”“怎么搜”“怎么展示思考”）","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n"},{"insert":"*","attributes":{"lineId":"OP18llQo","lmkr":"1"}},{"insert":"    sys"},{"insert":"tem_prompt = \"\"\"\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"EpWbf2WB","lmkr":"1"}},{"insert":"    你是AI个人助手，需实现“边想边搜边答”，核心规则如下：\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"b6fou6G7","lmkr":"1"}},{"insert":"    一、思考与搜索判断（必须实时输出思考过程）：\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"iFiMJY3R","lmkr":"1"}},{"insert":"    1. 若问题涉及“时效性（如近3年数据）、知识盲区（如具体企业薪资）、信息不足”，必须调用web_search；\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"U7FO4XQT","lmkr":"1"}},{"insert":"    2. 思考时需说明“是否需要搜索”“为什么搜”“搜索关键词是什么”。\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"LNqZnFjS","lmkr":"1"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"OUkRUiuS","lmkr":"1"}},{"insert":"    二、回答规则：\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"yGPYPklz","lmkr":"1"}},{"insert":"    1. 优先使用搜索到的资料，引用格式为`[1] (URL地址)`；\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"dNAjViMz","lmkr":"1"}},{"insert":"    2. 结构清晰（用序号、分段），多使用简单易懂的表述；\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"20L7T4io","lmkr":"1"}},{"insert":"    3. 结尾需列出所有参考资料（格式：1. [资料标题](URL)）。\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"86qa2mPU","lmkr":"1"}},{"insert":"    \"\"\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"cqEsXu7P","lmkr":"1"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"GSPxOG8c","lmkr":"1"}},{"insert":"    # 3. 构造API请求（触发思考-搜索-回答联动）","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n"},{"insert":"*","attributes":{"lineId":"D3ZJHLyp","lmkr":"1"}},{"insert":"    response = client.respon"},{"insert":"ses.create(\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"D7UxVJQV","lmkr":"1"}},{"insert":"        model=\"doubao-seed-1-6-251015\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":",  \n","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-built_in","lineId":"ANPOKO6p","lmkr":"1"}},{"insert":"        input","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"=[\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"CWgOH7bc","lmkr":"1"}},{"insert":"            # 系统提示词（指导AI行为）","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"Y0ZI0Yyw","lmkr":"1"}},{"insert":"            {\"role\": \"system\", \"content\": [{\"type\": \"input_text\", \"text\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":": "},{"insert":"system_prompt}]},\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"9bwUwkjt","lmkr":"1"}},{"insert":"            # 用户问题（可替换为任意需边想边搜的问题）","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"RixFN6JS","lmkr":"1"}},{"insert":"            {\"role\": \"user\", \"content\": [{\"type\": \"input_text\", \"text\": \"世界500强企业在国内所在的城市，近三年的平均工资是多少？\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"}]}\n"},{"insert":"*","attributes":{"lineId":"st3ZLDUW","lmkr":"1"}},{"insert":"      "},{"insert":"  ],\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"QCJwYKTi","lmkr":"1"}},{"insert":"        tools=[\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"Qqj71O7w","lmkr":"1"}},{"insert":"            # 配置Web Search工具参数","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"FOfnFZ9r","lmkr":"1"}},{"insert":"            {\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"9kVw3odN","lmkr":"1"}},{"insert":"                \"type\": \"web_search\",\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"yfM2QGn1","lmkr":"1"}},{"insert":"                \"limit\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":": 10","attributes":{"clientside-highlight":"code-hljs-number"}},{"insert":",  # 最多返回10条搜索结果","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"ICp6ZfXO","lmkr":"1"}},{"insert":"                \"sources\": [\"toutiao\", \"douyin\", \"moji\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"],  # 优先从头条内容、抖音百科，墨迹天气搜索","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"CKJkNPxj","lmkr":"1"}},{"insert":"                \"user_location\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":": {  # 优化地域相关搜索结果（如国内城市）","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"7O2wIgej","lmkr":"1"}},{"insert":"                    \"type\": \"approximate\",\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"Hz4HNKlI","lmkr":"1"}},{"insert":"                    \"country\": \"中国\",\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"OdsJaNeD","lmkr":"1"}},{"insert":"                    \"region\": \"浙江\",\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"XhpldZVc","lmkr":"1"}},{"insert":"                    \"city\": \"杭州\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"\n"},{"insert":"*","attributes":{"lineId":"GL17BbST","lmkr":"1"}},{"insert":"             "},{"insert":"   }\n","attributes":{"clientside-highlight":"code-hljs-literal"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-literal","lineId":"In7ivrsV","lmkr":"1"}},{"insert":"            }\n","attributes":{"clientside-highlight":"code-hljs-literal"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-literal","lineId":"nZaATajW","lmkr":"1"}},{"insert":"        ],\n","attributes":{"clientside-highlight":"code-hljs-literal"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-literal","lineId":"PGp6tXQd","lmkr":"1"}},{"insert":"        stream=True","attributes":{"clientside-highlight":"code-hljs-literal"}},{"insert":",  # 启用流式响应（核心：实时获取思考、搜索、回答片段）\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"B4kcqGuW","lmkr":"1"}},{"insert":"    )\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"qfnDAU9q","lmkr":"1"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"g4q6ebxa","lmkr":"1"}},{"insert":"    # 4. 处理流式响应（实时展示“思考-搜索-回答”过程）\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"KMUTIBpF","lmkr":"1"}},{"insert":"    # 状态变量：避免重复打印标题","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-literal"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-literal","lineId":"qqxzDwmC","lmkr":"1"}},{"insert":"    thinking_started = False","attributes":{"clientside-highlight":"code-hljs-literal"}},{"insert":"  # AI思考过程是否已开始打印","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-literal"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-literal","lineId":"DpL3IjXB","lmkr":"1"}},{"insert":"    answering_started = False","attributes":{"clientside-highlight":"code-hljs-literal"}},{"insert":"  # AI回答是否已开始打印","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-built_in","lineId":"CyDZXkbt","lmkr":"1"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-built_in","lineId":"a1iduMnu","lmkr":"1"}},{"insert":"    print","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"(\"=== 边想边搜启动 ===\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":")\n","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-keyword","lineId":"UfTgU1bx","lmkr":"1"}},{"insert":"    for chunk in","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" response:  # 遍历每一个实时返回的片段（chunk）","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-built_in","lineId":"rxjJImKU","lmkr":"1"}},{"insert":"        chunk_type = getattr","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"(chunk, \"type\", \"\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":")  # 获取片段类型（思考/搜索/回答）\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"N6ojXTib","lmkr":"1"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"UhTfasUq","lmkr":"1"}},{"insert":"        # ① 处理AI思考过程（实时打印“为什么搜、搜什么”）","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-keyword","lineId":"hnPVOhf5","lmkr":"1"}},{"insert":"        if","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" chunk_type == \"response.reasoning_summary_text.delta\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":":\n","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-keyword","lineId":"kMx63XGf","lmkr":"1"}},{"insert":"            if not","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" thinking_started:\n","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-built_in","lineId":"bAYTWrFX","lmkr":"1"}},{"insert":"                print","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"(f\"\\n🤔 AI思考中 [","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"{datetime.now().strftime(","attributes":{"clientside-highlight":"code-hljs-subst"}},{"insert":"'%H:%M:%S'","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":")}","attributes":{"clientside-highlight":"code-hljs-subst"}},{"insert":"]:\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":")\n","attributes":{"clientside-highlight":"code-hljs-literal"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-literal","lineId":"0OeOXumU","lmkr":"1"}},{"insert":"                thinking_started = True","attributes":{"clientside-highlight":"code-hljs-literal"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"q4JlXAZv","lmkr":"1"}},{"insert":"            # 打印思考内容（delta为实时增量文本）","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-built_in","lineId":"Ooc7tXtI","lmkr":"1"}},{"insert":"            print(getattr","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"(chunk, \"delta\", \"\"), end=\"\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":", flush=True","attributes":{"clientside-highlight":"code-hljs-literal"}},{"insert":")\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"JmEtT7Pi","lmkr":"1"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"vwcPVKlm","lmkr":"1"}},{"insert":"        # ② 处理搜索状态（开始/完成提示）","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-keyword","lineId":"WLd3gJnF","lmkr":"1"}},{"insert":"        elif","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" \"web_search_call\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":" in chunk_type:\n","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-keyword","lineId":"VpZTNx3w","lmkr":"1"}},{"insert":"            if","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" \"in_progress\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":" in","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" chunk_type:\n","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-built_in","lineId":"2rY5oW4U","lmkr":"1"}},{"insert":"                print","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"(f\"\\n\\n🔍 开始搜索 [","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"{datetime.now().strftime(","attributes":{"clientside-highlight":"code-hljs-subst"}},{"insert":"'%H:%M:%S'","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":")}","attributes":{"clientside-highlight":"code-hljs-subst"}},{"insert":"]\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":")\n","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-keyword","lineId":"btHnh8LH","lmkr":"1"}},{"insert":"            elif","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" \"completed\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":" in","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" chunk_type:\n","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-built_in","lineId":"jNR18vT2","lmkr":"1"}},{"insert":"                print","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"(f\"\\n✅ 搜索完成 [","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"{datetime.now().strftime(","attributes":{"clientside-highlight":"code-hljs-subst"}},{"insert":"'%H:%M:%S'","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":")}","attributes":{"clientside-highlight":"code-hljs-subst"}},{"insert":"]\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":")\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"Iewvx3ll","lmkr":"1"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"sJkq2Ulv","lmkr":"1"}},{"insert":"        # ③ 处理搜索关键词（展示AI实际搜索的内容）","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-keyword","lineId":"0NzeOjaj","lmkr":"1"}},{"insert":"        elif","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" (chunk_type == \"response.output_item.done\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":" \n","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-keyword","lineId":"Na6AtM1j","lmkr":"1"}},{"insert":"              and","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" hasattr","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"(chunk, \"item\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":") \n","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-keyword","lineId":"yrfWNIYX","lmkr":"1"}},{"insert":"              and","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" str(getattr","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"(chunk.item, \"id\", \"\")).startswith(\"ws_\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":")):  # ws_为搜索结果标识","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-keyword","lineId":"5lsqO0SN","lmkr":"1"}},{"insert":"            if","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" hasattr","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"(chunk.item.action, \"query\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"):\n","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-built_in","lineId":"VakBmmZs","lmkr":"1"}},{"insert":"                search_keyword = chunk.item.action.query\n","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-built_in","lineId":"qhWt24Nn","lmkr":"1"}},{"insert":"                print","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"(f\"\\n📝 本次搜索关键词：","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"{search_keyword}","attributes":{"clientside-highlight":"code-hljs-subst"}},{"insert":"\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":")\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"jesMvkNP","lmkr":"1"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"YAKqT0YT","lmkr":"1"}},{"insert":"        # ④ 处理最终回答（实时整合搜索结果并输出）","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-keyword","lineId":"pbdYgxAG","lmkr":"1"}},{"insert":"        elif","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" chunk_type == \"response.output_text.delta\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":":\n","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-keyword","lineId":"i84aggUL","lmkr":"1"}},{"insert":"            if not","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" answering_started:\n","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-built_in","lineId":"juwKeXcB","lmkr":"1"}},{"insert":"                print","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"(f\"\\n\\n💬 AI回答 [","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"{datetime.now().strftime(","attributes":{"clientside-highlight":"code-hljs-subst"}},{"insert":"'%H:%M:%S'","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":")}","attributes":{"clientside-highlight":"code-hljs-subst"}},{"insert":"]:\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":")\n","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-built_in","lineId":"m47ggPZX","lmkr":"1"}},{"insert":"                print","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"(\"-\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":" * 50","attributes":{"clientside-highlight":"code-hljs-number"}},{"insert":")\n","attributes":{"clientside-highlight":"code-hljs-literal"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-literal","lineId":"foW9Coaa","lmkr":"1"}},{"insert":"                answering_started = True","attributes":{"clientside-highlight":"code-hljs-literal"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"4IkON0ch","lmkr":"1"}},{"insert":"            # 打印回答内容（实时增量输出）","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-built_in","lineId":"7ZcM7uBf","lmkr":"1"}},{"insert":"            print(getattr","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"(chunk, \"delta\", \"\"), end=\"\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":", flush=True","attributes":{"clientside-highlight":"code-hljs-literal"}},{"insert":")\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"biyzN6sp","lmkr":"1"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"cT6LC0tE","lmkr":"1"}},{"insert":"    # 5. 流程结束","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-built_in","lineId":"gEnKAFpn","lmkr":"1"}},{"insert":"    print","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"(f\"\\n\\n=== 边想边搜完成 [","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"{datetime.now().strftime(","attributes":{"clientside-highlight":"code-hljs-subst"}},{"insert":"'%Y-%m-%d %H:%M:%S'","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":")}","attributes":{"clientside-highlight":"code-hljs-subst"}},{"insert":"] ===\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":")\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"fZUiJTFL","lmkr":"1"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-comment","lineId":"LYe5ccDO","lmkr":"1"}},{"insert":"# 运行函数","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-keyword","lineId":"BjZ6Sx32","lmkr":"1"}},{"insert":"if","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" __name__ == \"__main__\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":":\n"},{"insert":"*","attributes":{"lineId":"It9QmPTr","lmkr":"1"}},{"insert":"    realize_think_while_search()\n"}],"zoneId":"OeuFt2nhXo","zoneType":"Z"},"PwLAvnUREN":{"ops":[{"insert":" ","attributes":{"tabContent":"true","title":"curl","zoneId":"S8WV7h7bri"}},{"insert":" ","attributes":{"tabContent":"true","title":"Python SDK","zoneId":"ojER1HmsQa"}},{"insert":" ","attributes":{"tabContent":"true","title":"Java SDK","zoneId":"jNm2DwrpPH"}},{"insert":" ","attributes":{"tabContent":"true","title":"Go SDK","zoneId":"HFqcVOQjzK"}},{"insert":" ","attributes":{"tabContent":"true","title":"OpenAI Python SDK","zoneId":"FPjk08138f"}},{"insert":"\n"}],"zoneId":"PwLAvnUREN","zoneType":"Z"},"Q4cDuFZZNS":{"ops":[{"insert":"from","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" openai "},{"insert":"import","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" OpenAI\n"},{"insert":"import","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" os\n"},{"insert":"\n"},{"insert":"# 从环境变量中获取您的API KEY，配置方法见：https://www.volcengine.com/docs/82379/1399008","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n"},{"insert":"api_key = os.getenv("},{"insert":"'ARK_API_KEY'","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":")\n"},{"insert":"\n"},{"insert":"client = OpenAI(\n"},{"insert":"    base_url="},{"insert":"'https://ark.cn-beijing.volces.com/api/v3'","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":",\n"},{"insert":"    api_key=api_key\n"},{"insert":")\n"},{"insert":"\n"},{"insert":"tools = [{\n"},{"insert":"    "},{"insert":"\"type\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":": "},{"insert":"\"web_search\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":",\n"},{"insert":"    "},{"insert":"\"max_keyword\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":": "},{"insert":"2","attributes":{"clientside-highlight":"code-hljs-number"}},{"insert":",\n"},{"insert":"}]\n"},{"insert":"\n"},{"insert":"# 创建一个对话请求","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n"},{"insert":"response = client.responses.create(\n"},{"insert":"    model="},{"insert":"\"doubao-seed-1-6-251015\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":",\n"},{"insert":"    "},{"insert":"input","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"=[{"},{"insert":"\"role\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":": "},{"insert":"\"user\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":", "},{"insert":"\"content\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":": "},{"insert":"\"今天有什么热点新闻？\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"}],\n"},{"insert":"    tools=tools,\n"},{"insert":")\n"},{"insert":"\n"},{"insert":"print","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"(response)\n"}],"zoneId":"Q4cDuFZZNS","zoneType":"Z"},"S8WV7h7bri":{"ops":[{"insert":" ","attributes":{"language":"Bash","type":"codeblock","zoneId":"ofsGaH3Qub"}},{"insert":"\n"}],"zoneId":"S8WV7h7bri","zoneType":"Z"},"cD8tgKkmYf":{"ops":[{"insert":"*","attributes":{"lineId":"djN2afjL","lmkr":"1"}},{"insert":"# 定义系统提示词","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n"},{"insert":"*","attributes":{"lineId":"MqvxV7lc","lmkr":"1"}},{"insert":"system_prompt ="},{"insert":" \"\"\"\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"QjF0GKpM","lmkr":"1"}},{"insert":"你是AI个人助手，负责解答用户的各种问题。你的主要职责是：\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"lzV5qQG3","lmkr":"1"}},{"insert":"1. **信息准确性守护者**：确保提供的信息准确无误。\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"v2qvgr3b","lmkr":"1"}},{"insert":"2. **搜索成本优化师**：在信息准确性和搜索成本之间找到最佳平衡。\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"rDHMygJW","lmkr":"1"}},{"insert":"# 任务说明\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"kbEjtX7c","lmkr":"1"}},{"insert":"## 1. 联网意图判断\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"KiVB1Hq6","lmkr":"1"}},{"insert":"当用户提出的问题涉及以下情况时，需使用 `web_search` 进行联网搜索：\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"4I2XpyJX","lmkr":"1"}},{"insert":"- **时效性**：问题需要最新或实时的信息。\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"JueQFAUC","lmkr":"1"}},{"insert":"- **知识盲区**：问题超出当前知识范围，无法准确解答。\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"LPUjeJK7","lmkr":"1"}},{"insert":"- **信息不足**：现有知识库无法提供完整或详细的解答。\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"5ahq9eFS","lmkr":"1"}},{"insert":"## 2. 联网后回答\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"5F4ixAM2","lmkr":"1"}},{"insert":"- 在回答中，优先使用已搜索到的资料。\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"vZN61NzL","lmkr":"1"}},{"insert":"- 回复结构应清晰，使用序号、分段等方式帮助用户理解。\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"dLs3L90n","lmkr":"1"}},{"insert":"## 3. 引用已搜索资料\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"u65YCS8k","lmkr":"1"}},{"insert":"- 当使用联网搜索的资料时，在正文中明确引用来源，引用格式为：  \n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"xOO1c9gj","lmkr":"1"}},{"insert":"`[1]  (URL地址)`。\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"pDqlLxow","lmkr":"1"}},{"insert":"## 4. 总结与参考资料\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"m2SmHp4D","lmkr":"1"}},{"insert":"- 在回复的最后，列出所有已参考的资料。格式为：  \n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"Y3tXnAye","lmkr":"1"}},{"insert":"1. [资料标题](URL地址1)\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"RY6Ultsc","lmkr":"1"}},{"insert":"2. [资料标题](URL地址2)\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"gl1UaSeS","lmkr":"1"}},{"insert":"\"\"\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"\n"}],"zoneId":"cD8tgKkmYf","zoneType":"Z"},"ggJZa3VpGW":{"ops":[{"insert":"package","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" com.ark.example;\n"},{"insert":"import","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" com.fasterxml.jackson.core.JsonProcessingException;\n"},{"insert":"import","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" com.fasterxml.jackson.databind.ObjectMapper;\n"},{"insert":"import","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" com.fasterxml.jackson.databind.JsonNode;\n"},{"insert":"import","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" com.volcengine.ark.runtime.model.responses.item.*;\n"},{"insert":"import","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" com.volcengine.ark.runtime.model.responses.request.*;\n"},{"insert":"import","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" com.volcengine.ark.runtime.model.responses.response.ResponseObject;\n"},{"insert":"import","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" com.volcengine.ark.runtime.model.responses.constant.ResponsesConstants;\n"},{"insert":"import","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" com.volcengine.ark.runtime.model.responses.content.InputContentItemText;\n"},{"insert":"import","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" com.volcengine.ark.runtime.model.responses.tool.ResponsesTool;\n"},{"insert":"import","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" com.volcengine.ark.runtime.model.responses.tool.ToolFunction;\n"},{"insert":"import","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" com.volcengine.ark.runtime.model.responses.tool.ToolWebSearch;\n"},{"insert":"import","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" com.volcengine.ark.runtime.service.ArkService;\n"},{"insert":"\n"},{"insert":"import","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" java.util.Arrays;\n"},{"insert":"import","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" java.util.List;\n"},{"insert":"\n"},{"insert":"public","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" "},{"insert":"class","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" "},{"insert":"demo","attributes":{"clientside-highlight":"code-hljs-title class_"}},{"insert":" {\n"},{"insert":"    "},{"insert":"public","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" "},{"insert":"static","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" "},{"insert":"ObjectMapper","attributes":{"clientside-highlight":"code-hljs-type"}},{"insert":" "},{"insert":"om","attributes":{"clientside-highlight":"code-hljs-variable"}},{"insert":" "},{"insert":"=","attributes":{"clientside-highlight":"code-hljs-operator"}},{"insert":" "},{"insert":"new","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" "},{"insert":"ObjectMapper","attributes":{"clientside-highlight":"code-hljs-title class_"}},{"insert":"();\n"},{"insert":"\n"},{"insert":"    "},{"insert":"public","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" "},{"insert":"demo","attributes":{"clientside-highlight":"code-hljs-title function_"}},{"insert":"()","attributes":{"clientside-highlight":"code-hljs-params"}},{"insert":" "},{"insert":"throws","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" JsonProcessingException {\n"},{"insert":"    }\n"},{"insert":"\n"},{"insert":"    "},{"insert":"public","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" "},{"insert":"static","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" List\u003cResponsesTool\u003e "},{"insert":"buildTools","attributes":{"clientside-highlight":"code-hljs-title function_"}},{"insert":"()","attributes":{"clientside-highlight":"code-hljs-params"}},{"insert":" {\n"},{"insert":"        "},{"insert":"ToolWebSearch","attributes":{"clientside-highlight":"code-hljs-type"}},{"insert":" "},{"insert":"t","attributes":{"clientside-highlight":"code-hljs-variable"}},{"insert":" "},{"insert":"=","attributes":{"clientside-highlight":"code-hljs-operator"}},{"insert":" ToolWebSearch.builder()\n"},{"insert":"                .build();\n"},{"insert":"        System.out.println(Arrays.asList(t));\n"},{"insert":"        "},{"insert":"return","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" Arrays.asList(t);\n"},{"insert":"    }\n"},{"insert":"\n"},{"insert":"    "},{"insert":"public","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" "},{"insert":"static","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" "},{"insert":"void","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" "},{"insert":"main","attributes":{"clientside-highlight":"code-hljs-title function_"}},{"insert":"(String[] args)","attributes":{"clientside-highlight":"code-hljs-params"}},{"insert":" "},{"insert":"throws","attributes":{"clientside-highlight":"code-hljs-keyword"}},{"insert":" JsonProcessingException {\n"},{"insert":"        "},{"insert":"String","attributes":{"clientside-highlight":"code-hljs-type"}},{"insert":" "},{"insert":"apiKey","attributes":{"clientside-highlight":"code-hljs-variable"}},{"insert":" "},{"insert":"=","attributes":{"clientside-highlight":"code-hljs-operator"}},{"insert":" System.getenv("},{"insert":"\"ARK_API_KEY\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":");\n"},{"insert":"\n"},{"insert":"\n"},{"insert":"        "},{"insert":"// 创建ArkService实例","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n"},{"insert":"        "},{"insert":"ArkService","attributes":{"clientside-highlight":"code-hljs-type"}},{"insert":" "},{"insert":"arkService","attributes":{"clientside-highlight":"code-hljs-variable"}},{"insert":" "},{"insert":"=","attributes":{"clientside-highlight":"code-hljs-operator"}},{"insert":" ArkService.builder().apiKey(apiKey).baseUrl("},{"insert":"\"https://ark.cn-beijing.volces.com/api/v3\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":").build();\n"},{"insert":"        "},{"insert":"CreateResponsesRequest","attributes":{"clientside-highlight":"code-hljs-type"}},{"insert":" "},{"insert":"req","attributes":{"clientside-highlight":"code-hljs-variable"}},{"insert":" "},{"insert":"=","attributes":{"clientside-highlight":"code-hljs-operator"}},{"insert":" CreateResponsesRequest.builder()\n"},{"insert":"                .model("},{"insert":"\"doubao-seed-1-6-251015\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":")\n"},{"insert":"                .input(ResponsesInput.builder().addListItem(\n"},{"insert":"                        ItemEasyMessage.builder().role(ResponsesConstants.MESSAGE_ROLE_USER).content(\n"},{"insert":"                                MessageContent.builder()\n"},{"insert":"                                        .addListItem(InputContentItemText.builder().text("},{"insert":"\"今天有什么热点新闻\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":").build())\n"},{"insert":"                                        .build()\n"},{"insert":"                        ).build()\n"},{"insert":"                ).build())\n"},{"insert":"                .tools(buildTools())\n"},{"insert":"                .build();\n"},{"insert":"        "},{"insert":"ResponseObject","attributes":{"clientside-highlight":"code-hljs-type"}},{"insert":" "},{"insert":"resp","attributes":{"clientside-highlight":"code-hljs-variable"}},{"insert":" "},{"insert":"=","attributes":{"clientside-highlight":"code-hljs-operator"}},{"insert":" arkService.createResponse(req);\n"},{"insert":"        System.out.println(resp);\n"},{"insert":"\n"},{"insert":"        arkService.shutdownExecutor();\n"},{"insert":"    }\n"},{"insert":"}\n"}],"zoneId":"ggJZa3VpGW","zoneType":"Z"},"jNm2DwrpPH":{"ops":[{"insert":" ","attributes":{"language":"Java","type":"codeblock","zoneId":"ggJZa3VpGW"}},{"insert":"\n"}],"zoneId":"jNm2DwrpPH","zoneType":"Z"},"ofsGaH3Qub":{"ops":[{"insert":"*","attributes":{"lineId":"Jmsc6QFS","lmkr":"1"}},{"insert":"curl --location "},{"insert":"'https://ark.cn-beijing.volces.com/api/v3/responses'","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":" \\\\\n"},{"insert":"*","attributes":{"lineId":"R4YcnQeR","lmkr":"1"}},{"insert":"--header"},{"insert":" \"Authorization: Bearer ","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"$ARK_API_KEY","attributes":{"clientside-highlight":"code-hljs-variable"}},{"insert":"\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":" \\\\\n"},{"insert":"*","attributes":{"lineId":"BgoXuToR","lmkr":"1"}},{"insert":"--heade"},{"insert":"r 'Content-Type: application/json'","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":" \\\\\n"},{"insert":"*","attributes":{"lineId":"7zvna2wx","lmkr":"1"}},{"insert":"--da"},{"insert":"ta '{\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"Tqlrqr5H","lmkr":"1"}},{"insert":"    \"model\": \"doubao-seed-1-6-251015\",\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"nziUMIw6","lmkr":"1"}},{"insert":"    \"stream\": true,\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"GhKV9md9","lmkr":"1"}},{"insert":"    \"tools\": [\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"EZNGOnM3","lmkr":"1"}},{"insert":"        {\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"dDOlpVZy","lmkr":"1"}},{"insert":"            \"type\": \"web_search\",\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"OGy1JyV8","lmkr":"1"}},{"insert":"            \"max_keyword\": 2\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"44tfrvgd","lmkr":"1"}},{"insert":"        }\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"hTMsqKhC","lmkr":"1"}},{"insert":"    ],\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"PC9V83H9","lmkr":"1"}},{"insert":"    \"input\": [\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"pDulCQSi","lmkr":"1"}},{"insert":"        {\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"JGz2BvCc","lmkr":"1"}},{"insert":"            \"role\": \"user\",\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"QzFtFP1j","lmkr":"1"}},{"insert":"            \"content\": [\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"cEuVBWrI","lmkr":"1"}},{"insert":"                {\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"8mBQIy7n","lmkr":"1"}},{"insert":"                    \"type\": \"input_text\",\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"zVH5H6bn","lmkr":"1"}},{"insert":"                    \"text\": \"今天有什么热点新闻\"\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"iVd6XguF","lmkr":"1"}},{"insert":"                }\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"wmCso9uu","lmkr":"1"}},{"insert":"            ]\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"x8X3CoaN","lmkr":"1"}},{"insert":"        }\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"n3rGM1Rm","lmkr":"1"}},{"insert":"    ]\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"Ppw0v4oW","lmkr":"1"}},{"insert":"}'","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"\n"}],"zoneId":"ofsGaH3Qub","zoneType":"Z"},"ojER1HmsQa":{"ops":[{"insert":" ","attributes":{"language":"Python","type":"codeblock","zoneId":"CiGTMyxmvv"}},{"insert":"\n"}],"zoneId":"ojER1HmsQa","zoneType":"Z"},"rF5njMtQhO":{"ops":[{"insert":"*","attributes":{"lineId":"pm1gzCRD","lmkr":"1"}},{"insert":"# 定义系统提示词","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n"},{"insert":"*","attributes":{"lineId":"xCasaxgp","lmkr":"1"}},{"insert":"system_prompt ="},{"insert":" \"\"\"\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"zobvRt2Z","lmkr":"1"}},{"insert":"# 角色\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"SqZ7QR1l","lmkr":"1"}},{"insert":"你是AI个人助手，负责解答用户的各种问题。你的主要职责是：\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"YkT19dEy","lmkr":"1"}},{"insert":"1. **信息准确性守护者**：确保提供的信息准确无误。\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"LJA9JEAv","lmkr":"1"}},{"insert":"2. **回答更生动活泼**：请在模型的回复中多使用适当的 emoji 标签 🌟😊🎉\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"nVu6ufzF","lmkr":"1"}},{"insert":"# 任务说明\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"tAOEfurS","lmkr":"1"}},{"insert":"## 1. 联网意图判断\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"pJeejnN5","lmkr":"1"}},{"insert":"当用户提出的问题涉及以下情况时，需使用 `web_search` 进行联网搜索：\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"QqrGrKLI","lmkr":"1"}},{"insert":"- **时效性**：问题需要最新或实时的信息。\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"iDH7S6Fy","lmkr":"1"}},{"insert":"- **知识盲区**：问题超出当前知识范围，无法准确解答。\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"aym1mvAg","lmkr":"1"}},{"insert":"- **信息不足**：现有知识库无法提供完整或详细的解答。\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"YeWqUBuj","lmkr":"1"}},{"insert":"## 2. 联网后回答\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"luLM6B1z","lmkr":"1"}},{"insert":"- 在回答中，优先使用已搜索到的资料。\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"kLkIuTeC","lmkr":"1"}},{"insert":"- 回复结构应清晰，使用序号、分段等方式帮助用户理解。\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"LszkseI2","lmkr":"1"}},{"insert":"## 3. 引用已搜索资料\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"V6j4Ys31","lmkr":"1"}},{"insert":"- 当使用联网搜索的资料时，在正文中明确引用来源，引用格式为：  \n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"hUmmxRXC","lmkr":"1"}},{"insert":"`[1]  (URL地址)`。\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"5Zrm8Jg2","lmkr":"1"}},{"insert":"## 4. 总结与参考资料\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"89dDwYSZ","lmkr":"1"}},{"insert":"- 在回复的最后，列出所有已参考的资料。格式为：  \n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"EKHlQre6","lmkr":"1"}},{"insert":"1. [资料标题](URL地址1)\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"X3CFy3Th","lmkr":"1"}},{"insert":"2. [资料标题](URL地址2)\n","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"*","attributes":{"clientside-highlight":"code-hljs-string","lineId":"v7FPw1z3","lmkr":"1"}},{"insert":"\"\"\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"\n"}],"zoneId":"rF5njMtQhO","zoneType":"Z"},"s7sgR5y3N8":{"ops":[{"insert":"*","attributes":{"lineId":"kbw6MWHZ","lmkr":"1"}},{"insert":"tools=[\n"},{"insert":"*","attributes":{"lineId":"DFdXQDNj","lmkr":"1"}},{"insert":"    {\n"},{"insert":"*","attributes":{"lineId":"gloVgdb2","lmkr":"1"}},{"insert":"      "},{"insert":"  \"type\": \"web_search\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":","},{"insert":"  # 配置工具类型为基础联网搜索功能","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n"},{"insert":"*","attributes":{"lineId":"EMGtKoNs","lmkr":"1"}},{"insert":"     "},{"insert":"   \"sources\": [\"douyin\", \"moji\", \"toutiao\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":"]"},{"insert":",  # 附加搜索来源（抖音百科、墨迹天气、头条图文等平台）","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n"},{"insert":"*","attributes":{"lineId":"Qh72O1Pf","lmkr":"1"}},{"insert":"    }\n"},{"insert":"*","attributes":{"lineId":"sivK80xh","lmkr":"1"}},{"insert":"],\n"}],"zoneId":"s7sgR5y3N8","zoneType":"Z"},"tBbgD4jHKj":{"ops":[{"insert":"*","attributes":{"lineId":"ddYfnCS5","lmkr":"1"}},{"insert":"...\n"},{"insert":"*","attributes":{"lineId":"TGGN0i9G","lmkr":"1"}},{"insert":"\n"},{"insert":"*","attributes":{"lineId":"FJMlR0fZ","lmkr":"1"}},{"insert":"===== 工具使用统计 =====\n"},{"insert":"*","attributes":{"lineId":"riCvcLL8","lmkr":"1"}},{"insert":"tool_usage: ToolUsage(web_sear"},{"insert":"ch=2","attributes":{"clientside-highlight":"code-hljs-number"}},{"insert":", m"},{"insert":"cp=None","attributes":{"clientside-highlight":"code-hljs-literal"}},{"insert":")\n"},{"insert":"*","attributes":{"lineId":"Ql6L3ZRV","lmkr":"1"}},{"insert":"tool_usage_details: ToolUsageDetails(web_sear"},{"insert":"ch={'search_engine'","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":": 2","attributes":{"clientside-highlight":"code-hljs-number"}},{"insert":", 'toutiao'","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":": 2","attributes":{"clientside-highlight":"code-hljs-number"}},{"insert":"}, "},{"insert":"mcp=None","attributes":{"clientside-highlight":"code-hljs-literal"}},{"insert":")\n"}],"zoneId":"tBbgD4jHKj","zoneType":"Z"},"vs7EMV6PXj":{"ops":[{"insert":"*","attributes":{"lineId":"yYBEG9bV","lmkr":"1"}},{"insert":"tools = [{\n"},{"insert":"*","attributes":{"lineId":"PCBwYXgU","lmkr":"1"}},{"insert":"   "},{"insert":" \"type\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":":"},{"insert":" \"web_search\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":",\n"},{"insert":"*","attributes":{"lineId":"iNRqdKrx","lmkr":"1"}},{"insert":"  "},{"insert":"  \"max_keyword\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":": 2","attributes":{"clientside-highlight":"code-hljs-number"}},{"insert":", \n"},{"insert":"*","attributes":{"lineId":"wFZ8pnkg","lmkr":"1"}},{"insert":"}]\n"}],"zoneId":"vs7EMV6PXj","zoneType":"Z"},"yqehUqIve9":{"ops":[{"insert":"*","attributes":{"lineId":"zppQQ8UQ","lmkr":"1"}},{"insert":"response = client.responses.create(\n"},{"insert":"*","attributes":{"lineId":"ssD3OkjT","lmkr":"1"}},{"insert":"        model"},{"insert":"=\"doubao-seed-1-6-251015\"","attributes":{"clientside-highlight":"code-hljs-string"}},{"insert":", \n"},{"insert":"*","attributes":{"lineId":"WDkkt3gG","lmkr":"1"}},{"insert":"      "},{"insert":"  input","attributes":{"clientside-highlight":"code-hljs-built_in"}},{"insert":"=["},{"insert":"  # 输入内容，包含系统提示和用户问题","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n"},{"insert":"*","attributes":{"lineId":"AIdio9nH","lmkr":"1"}},{"insert":"            ...\n"},{"insert":"*","attributes":{"lineId":"dYrpX2ad","lmkr":"1"}},{"insert":"        ],\n"},{"insert":"*","attributes":{"lineId":"Rke70m6N","lmkr":"1"}},{"insert":"        too"},{"insert":"ls=[ # 使用工具及参数","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n"},{"insert":"*","attributes":{"lineId":"YBRO2IF8","lmkr":"1"}},{"insert":"            ...\n"},{"insert":"*","attributes":{"lineId":"IHqJw8kV","lmkr":"1"}},{"insert":"        ],\n"},{"insert":"*","attributes":{"lineId":"IyRVHGO6","lmkr":"1"}},{"insert":"       "},{"insert":" stream=True","attributes":{"clientside-highlight":"code-hljs-literal"}},{"insert":",  # 启用流式响应（实时返回结果，而非等待全部完成）","attributes":{"clientside-highlight":"code-hljs-comment"}},{"insert":"\n"},{"insert":"*","attributes":{"lineId":"wCLQzIil","lmkr":"1"}},{"insert":"    )\n"}],"zoneId":"yqehUqIve9","zoneType":"Z"}}}
