# 工具概述
{"version":"0.4.3","data":{"0":{"ops":[{"insert":"*","attributes":{"lineId":"2hwal0rs6t","lmkr":"1"}},{"insert":"在生成模型响应时，您可以使用方舟大模型内置工具、Function Calling 以及 MCP 等工具来扩展模型的功能。\n"},{"insert":"*","attributes":{"lineId":"2i53a0rtde","lmkr":"1"}},{"insert":"这些功能使模型能够自行判断，并决策是否调用搜索网络资料、图片处理等内置工具或者您自己的自定义函数。\n"},{"insert":" ","attributes":{"tabs":"true","tabsZoneId":"s6bEtojca4","zoneType":"Z"}},{"insert":"*","attributes":{"anchor":"#24ee5c92","heading":"h2","lineId":"2i74h0ruf9","lmkr":"1"}},{"insert":"支持工具\n"},{"insert":"*","attributes":{"anchor":"#53fd9080","heading":"h3","lineId":"2ia6p0rvvk","lmkr":"1"}},{"insert":"内置工具\n"},{"insert":"*","attributes":{"lineId":"2icfo0rwzk","lmkr":"1"}},{"insert":"当通过 Responses API "},{"insert":"创建模型响应","attributes":{"hyperlink":"{\"href\":\"https://www.volcengine.com/docs/82379/1569618\",\"linkId\":\"l2k68o1g02\",\"newTab\":true}"}},{"insert":"时，您可以通过在参数中配置"},{"insert":"tools","attributes":{"inlineCode":"true"}},{"insert":"字段来访问工具。每个工具中都有独特的配置要求，具体见如下教程：\n"},{"insert":"*","attributes":{"lineId":"2iepi0rxs3","list":"bullet1","lmkr":"1","origin-start":"1","start":"1"}},{"insert":"豆包助手","attributes":{"hyperlink":"{\"href\":\"/docs/82379/1978533\",\"linkId\":\"U648ukwGlF\",\"newTab\":true}"}},{"insert":"\n"},{"insert":"*","attributes":{"lineId":"2igdw0rysz","list":"indent1","lmkr":"1","text-indent":"true"}},{"insert":"为您的应用快速集成与「豆包 App」同款的 AI 功能，例如日常沟通、深度沟通和联网搜索，快速获得安全、可靠且可控的优质 AI 体验。\n"},{"insert":"*","attributes":{"lineId":"2iijj0rz98","list":"bullet1","lmkr":"1","origin-start":"1","start":"1"}},{"insert":"联网搜索 Web Search","attributes":{"hyperlink":"{\"href\":\"/docs/82379/1756990\",\"linkId\":\"XoTfHYqYBw\",\"newTab\":true}"}},{"insert":"\n"},{"insert":"*","attributes":{"lineId":"2ikdi0s0it","list":"indent1","lmkr":"1","text-indent":"true"}},{"insert":"支持获取实时公开网络信息（如新闻、商品、天气等），解决数据时效性、知识盲区、信息同步等核心问题，并且无需自行开发搜索引擎或维护数据资源。\n"},{"insert":"*","attributes":{"lineId":"2imx20s1zk","list":"bullet1","lmkr":"1","origin-start":"1","start":"1"}},{"insert":"图像处理 Image Process","attributes":{"hyperlink":"{\"href\":\"/docs/82379/1798161\",\"linkId\":\"Xtx50tPXUj\",\"newTab\":true}"}},{"insert":"\n"},{"insert":"*","attributes":{"lineId":"2iojs0s2ty","list":"indent1","lmkr":"1","text-indent":"true"}},{"insert":"支持通过 Responses API 调用对输入图片执行画点、画线、旋转、缩放、框选/裁剪关键区域等基础操作，适用于需模型通过视觉处理提升图片理解的场景（如图文内容分析、物体定位标注、多轮视觉推理等）。工具通过模型自动判断图像处理逻辑，支持与自定义 Function 混合使用，且可处理多轮视觉输入（上一轮输出图片作为下一轮输入）。\n"},{"insert":"*","attributes":{"lineId":"2iq210s3z9","list":"bullet1","lmkr":"1","origin-start":"1","start":"1"}},{"insert":"私域知识库搜索 Knowledge Search","attributes":{"hyperlink":"{\"href\":\"/docs/82379/1873396\",\"linkId\":\"xaNdT5dSWC\",\"newTab\":true}"}},{"insert":"\n"},{"insert":"*","attributes":{"lineId":"2isq20s45w","list":"indent1","lmkr":"1","text-indent":"true"}},{"insert":"支持通过 Responses API 调用直接获取企业私域知识库中的信息（如内部文档、产品手册、行业资料等），适用于需基于企业专属数据解答问题的场景（如内部培训问答、产品功能咨询、行业方案查询等）。工具通过模型自动判断是否需要调用私域知识库，支持与自定义 Function、MCP 等工具混合使用，目前仅支持旗舰版知识库。\n"},{"insert":"*","attributes":{"anchor":"#fc9a8ccc","heading":"h3","lineId":"2iu8m0s54n","lmkr":"1"}},{"insert":"函数调用 Function Calling\n"},{"insert":"*","attributes":{"lineId":"2iwg70s6xg","lmkr":"1"}},{"insert":"您也可以在创建模型响应时，使用"},{"insert":"tools","attributes":{"inlineCode":"true"}},{"insert":"来定义自定义函数。模型通过调用自定义函数代码，来访问模型中无法直接使用的特定数据或功能。了解更多信息，请参见"},{"insert":"函数调用 Function Calling","attributes":{"hyperlink":"{\"href\":\"/docs/82379/1262342\",\"linkId\":\"xmfWjkTTOb\",\"newTab\":true}"}},{"insert":"。\n"},{"insert":"*","attributes":{"anchor":"#eda80765","heading":"h3","lineId":"2jgru0s77r","lmkr":"1"}},{"insert":"云部署 MCP / Remote MCP\n"},{"insert":"*","attributes":{"lineId":"2jimd0s8na","lmkr":"1"}},{"insert":"Responses API支持通过 Streamable HTTP 链接的 MCP 调用。适用于复杂任务（如多步数据查询 + 分析）场景，支持与自定义 Function、Web Search 工具混合使用。详情请参见"},{"insert":"云部署 MCP / Remote MCP","attributes":{"hyperlink":"{\"href\":\"/docs/82379/1827534\",\"linkId\":\"w8wN04xxJw\",\"newTab\":true}"}},{"insert":"。\n\n"}],"zoneId":"0","zoneType":"Z"},"BKdKO6pbKv":{"ops":[{"insert":" ","attributes":{"language":"Bash","type":"codeblock","zoneId":"sIPzdoWtlo"}},{"insert":"\n"}],"zoneId":"BKdKO6pbKv","zoneType":"Z"},"IVbzSeBafk":{"ops":[{"insert":" ","attributes":{"language":"Bash","type":"codeblock","zoneId":"PoM51K6JQW"}},{"insert":"\n"}],"zoneId":"IVbzSeBafk","zoneType":"Z"},"PoM51K6JQW":{"ops":[{"insert":"curl --location 'https://ark.cn-beijing.volces.com/api/v3/responses' \\\\\n--header 'Content-Type: application/json' \\\\\n--header 'Authorization: Bearer \u003cARK_API_KEY\u003e' \\\\\n--header 'ark-beta-knowledge-search: true' \\\\\n--data '{\n    \"model\": \"doubao-seed-1-6-251015\",\n    \"stream\": true,\n    \"thinking\": {\n        \"type\": \"disabled\"  # 关闭模型思考，直接调用知识库搜索\n    },\n    \"tools\": [\n        {\n            \"type\": \"knowledge_search\",\n            \"knowledge_resource_id\": \"\u003cknowledge_resource_id\u003e\",  # 替换为实际知识库ID\n            \"limit\": 2,  # 最多返回2条搜索结果\n            \"ranking_options\": {\n                \"get_attachment_link\": true  # 获取图片临时下载链接\n            }\n        }\n    ],\n    \"input\": [\n        {\n            \"role\": \"user\",\n            \"content\": \"机票选择页面中，如何选择该航班不同价格的机票？\"  # 用户问题\n        }\n    ],\n    \"max_tool_calls\": 1  # 仅调用1轮知识库搜索\n}'\n"}],"zoneId":"PoM51K6JQW","zoneType":"Z"},"bpJVkl8fQ5":{"ops":[{"insert":"from volcenginesdkarkruntime import Ark\nfrom volcenginesdkarkruntime.types.chat import ChatCompletion\nimport json\nclient = Ark()\nmessages = [\n    {\"role\": \"user\", \"content\": \"北京和上海今天的天气如何？\"}\n]\n# 步骤1: 定义工具\ntools = [{\n  \"type\": \"function\",\n  \"function\": {\n    \"name\": \"get_current_weather\",\n    \"description\": \"获取指定地点的天气信息\",\n    \"parameters\": {\n      \"type\": \"object\",\n      \"properties\": {\n        \"location\": {\n          \"type\": \"string\",\n          \"description\": \"地点的位置信息，例如北京、上海\"\n        },\n        \"unit\": {\n          \"type\": \"string\",\n          \"enum\": [\"摄氏度\", \"华氏度\"],\n          \"description\": \"温度单位\"\n        }\n      },\n      \"required\": [\"location\"]\n    }\n  }\n}]\ndef get_current_weather(location: str, unit=\"摄氏度\"):\n    # 实际调用天气查询 API 的逻辑\n    # 此处为示例，返回模拟的天气数据\n    return f\"{location}今天天气晴朗，温度 25 {unit}。\"\nwhile True:\n    # 步骤2: 发起模型请求，由于模型在收到工具执行结果后仍然可能有工具调用意愿，因此需要多次请求\n    completion: ChatCompletion = client.chat.completions.create(\n    model=\"doubao-seed-1-6-251015\",\n    messages=messages,\n    tools=tools\n    )\n    resp_msg = completion.choices[0].message\n    # 展示模型中间过程的回复内容\n    print(resp_msg.content)\n    if completion.choices[0].finish_reason != \"tool_calls\":\n        # 模型最终总结，没有调用工具意愿\n        break\n    messages.append(completion.choices[0].message.model_dump())\n    tool_calls = completion.choices[0].message.tool_calls\n    for tool_call in tool_calls:\n        tool_name = tool_call.function.name\n        if tool_name == \"get_current_weather\":\n            # 步骤 3：调用外部工具\n            args = json.loads(tool_call.function.arguments)\n            tool_result = get_current_weather(**args)\n            # 步骤 4：回填工具结果，并获取模型总结回复\n            messages.append(\n                {\"role\": \"tool\", \"content\": tool_result, \"tool_call_id\": tool_call.id}\n            )\n"}],"zoneId":"bpJVkl8fQ5","zoneType":"Z"},"fIep7fzLGa":{"ops":[{"insert":" ","attributes":{"language":"Bash","type":"codeblock","zoneId":"nzzrx6LxrL"}},{"insert":"\n"}],"zoneId":"fIep7fzLGa","zoneType":"Z"},"iVh6iBnusY":{"ops":[{"insert":" ","attributes":{"language":"Bash","type":"codeblock","zoneId":"qp30J1syNk"}},{"insert":"\n"}],"zoneId":"iVh6iBnusY","zoneType":"Z"},"iyuyseg6U7":{"ops":[{"insert":" ","attributes":{"language":"Python","type":"codeblock","zoneId":"bpJVkl8fQ5"}},{"insert":"\n"}],"zoneId":"iyuyseg6U7","zoneType":"Z"},"kwQCGYqbHk":{"ops":[{"insert":"curl --location 'https://ark.cn-beijing.volces.com/api/v3/responses' \\\\\n--header \"Authorization: Bearer \u003cARK_API_KEY\u003e\" \\\\\n--header 'Content-Type: application/json' \\\\\n--header 'ark-beta-mcp: true' \\\\\n--data '{\n    \"model\": \"doubao-seed-1-6-251015\",\n    \"stream\": true,\n    \"tools\": [\n        {\n            \"type\": \"mcp\",\n            \"server_label\": \"deepwiki\",\n            \"server_url\": \"https://mcp.deepwiki.com/mcp\",\n            \"require_approval\": \"never\" \n        }\n    ],\n    \"input\": [\n        {\n            \"role\": \"user\",\n            \"content\": [\n                {\n                    \"type\": \"input_text\",\n                    \"text\": \"看一下volcengine/ai-app-lab这个repo的文档\"\n                }\n            ]\n        }\n    ]\n}'\n"}],"zoneId":"kwQCGYqbHk","zoneType":"Z"},"nzzrx6LxrL":{"ops":[{"insert":"curl --location 'https://ark.cn-beijing.volces.com/api/v3/responses' \\\\\n--header \"Authorization: Bearer $ARK_API_KEY\" \\\\\n--header 'Content-Type: application/json' \\\\\n--header 'ark-beta-doubao-app: true' \\\\\n--data '{\n    \"model\": \"doubao-seed-1-6-251015\",\n    \"stream\": true,\n    \"tools\": [\n        {\n            \"type\": \"doubao_app\",\n            \"feature\": {\n                \"ai_search\": {\n                    \"type\": \"enabled\",\n                    \"role_description\": \"你是科技领域助手，专业解答行业问题\"\n                },\n            }\n        }\n    ],\n    \"input\": [\n        {\n            \"type\": \"message\",\n            \"role\": \"user\",\n            \"content\": [\n                {\n                    \"type\": \"input_text\",\n                    \"text\": \"今天有什么AI领域热点新闻\"\n                }\n            ]\n        }\n    ]\n}'\n"}],"zoneId":"nzzrx6LxrL","zoneType":"Z"},"qp30J1syNk":{"ops":[{"insert":"curl --location 'https://ark.cn-beijing.volces.com/api/v3/responses' \\\\\n--header \"Authorization: Bearer \u003cARK_API_KEY\u003e\" \\\\\n--header 'Content-Type: application/json' \\\\\n--data '{\n    \"model\": \"doubao-seed-1-6-251015\",\n    \"stream\": true,\n    \"tools\": [\n        {\"type\": \"web_search\"}\n    ],\n    \"input\": [\n        {\n            \"role\": \"user\",\n            \"content\": [\n                {\n                    \"type\": \"input_text\",\n                    \"text\": \"今天有什么热点新闻\"\n                }\n            ]\n        }\n    ]\n}'\n"}],"zoneId":"qp30J1syNk","zoneType":"Z"},"s6bEtojca4":{"ops":[{"insert":" ","attributes":{"tabContent":"true","title":"豆包助手","zoneId":"fIep7fzLGa"}},{"insert":" ","attributes":{"tabContent":"true","title":"联网搜索","zoneId":"iVh6iBnusY"}},{"insert":" ","attributes":{"tabContent":"true","title":"图像处理","zoneId":"BKdKO6pbKv"}},{"insert":" ","attributes":{"tabContent":"true","title":"私域知识库搜索","zoneId":"IVbzSeBafk"}},{"insert":" ","attributes":{"tabContent":"true","title":"函数调用 Function Calling","zoneId":"iyuyseg6U7"}},{"insert":" ","attributes":{"tabContent":"true","title":"MCP","zoneId":"sJUI2oWEI8"}},{"insert":"\n"}],"zoneId":"s6bEtojca4","zoneType":"Z"},"sIPzdoWtlo":{"ops":[{"insert":"curl --location 'https://ark.cn-beijing.volces.com/api/v3/responses' \\\\\n--header 'Content-Type: application/json' \\\\\n--header 'Authorization: Bearer \u003cARK_API_KEY\u003e' \\\\\n--header 'ark-beta-image-process: true' \\\\\n--data '{\n    \"model\": \"doubao-seed-1-6-vision-250815\",\n    \"stream\": true,\n    \"tools\": [\n        {\"type\": \"image_process\"}\n    ],\n    \"input\": [\n        {\n            \"type\": \"message\",\n            \"role\": \"system\",\n            \"content\": [\n                {\n                    \"type\": \"input_text\",\n                    \"text\": \"数一数有多少颗草莓？\"\n                },\n                {\n                    \"type\": \"input_image\",\n                    \"image_url\": \"https://ark-project.tos-cn-beijing.volces.com/doc_image/image_process_2.jpg\"\n                }\n            ]\n        }\n    ]\n}'\n"}],"zoneId":"sIPzdoWtlo","zoneType":"Z"},"sJUI2oWEI8":{"ops":[{"insert":" ","attributes":{"language":"Bash","type":"codeblock","zoneId":"kwQCGYqbHk"}},{"insert":"\n"}],"zoneId":"sJUI2oWEI8","zoneType":"Z"}}}